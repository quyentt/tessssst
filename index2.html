<html lang="en" love-deals="879BC0364EB9EBEE3DBE71B15E175613">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, interactive-widget=resizes-content" />
    <title>Chat Layout</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            font-family: Arial, sans-serif;
            overflow: hidden;
            /* Ngăn trang bị cuộn ngoài ý muốn */
        }
        /* Header cố định trên đầu */
        
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 18px;
            z-index: 1000;
            padding-top: env(safe-area-inset-bottom);
            ;
            /* Luôn trên cùng */
        }
        /* Content tự co dãn */
        
        .content {
            margin-top: 60px;
            /* Đẩy nội dung xuống dưới header */
            overflow-y: scroll;
            /* Cho phép cuộn nội dung */
            padding: 10px;
            background-color: #f9f9f9;
        }
        /* Ẩn thanh cuộn */
        
        .content::-webkit-scrollbar {
            display: none;
        }
        /* Footer cố định ở dưới */
        
        footer {
            left: 0;
            width: 100%;
            background-color: #333;
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            /* Đảm bảo footer trên cùng */
        }
        
        footer input[type="text"] {
            flex: 1;
            padding: 10px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            /* Đảm bảo font đủ lớn */
        }
        
        footer button {
            padding: 10px 15px;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        
        footer button:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header id="header">
        <h1>Chat Header</h1>
    </header>

    <!-- Content -->
    <div class="content" id="content" style="height: 200px">
        <p>Đây là nội dung có thể thay đổi hoặc kéo dài tùy ý.</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
        <p>Nội dung thứ 2...</p>
        <p>Nội dung thứ 3...</p>
        <p>Nội dung thứ 4...</p>
        <p>Nội dung thứ 5...</p>
        <p>Nội dung thứ 6...</p>
        <p>Nội dung thứ 7...</p>
        <p>Nội dung thứ 8...</p>
        <p>Nội dung thứ 9...</p>
        <p>Nội dung thứ 10...</p>
    </div>

    <!-- Footer -->
    <footer id="footer">
        <input type="text" placeholder="Nhập tin nhắn của bạn..." id="inputText">
        <button>Gửi</button>
    </footer>

    <script>
        /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Variable declarations
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */
        let keyboardStartPos = 0;
        let menuBtnElem = document.getElementById('footer');
        let originalElemCss = menuBtnElem.style.cssText;
        let visibleView = window.visualViewport;
        let maxViewHeight = document.documentElement.clientHeight;
        let textAreaElem = document.getElementById('inputText');

        /*
            Functions
        */
        /*
            Function below calls "listenForViewReduction()" only once and ends. After
            that "listenForViewReduction()" calls this function back after the view's 
            height when the keyboard's open has been successfully saved to a variable.
        */
        function moveElemAboveKeyboard() {

            if (keyboardStartPos == 0) {
                listenForViewReduction();
                return;
            }

            menuBtnElem.style.bottom = 'auto';
            menuBtnElem.style.top = (keyboardStartPos - menuBtnElem.offsetHeight) + 'px';

        }

        /*
            Function below is used only once to get size of visible view when the 
            keyboard's open. When this is first called, the visible view will not 
            be correct (it will still be the full view), but straight after the 
            event listener triggers a second time and reads the correct view. After 
            which it saves the value, calls back "moveElemAboveKeyboard()" and 
            removes the event listener (itself).
        */
        function listenForViewReduction() {

            visibleView.addEventListener('resize', function func() {

                let visibleViewHeight = visibleView.height;

                if (visibleViewHeight != maxViewHeight) {

                    keyboardStartPos = visibleViewHeight;

                    moveElemAboveKeyboard();

                    visibleView.removeEventListener('resize', func);
                }
            });
        }

        /*
            Rest of code
        */
        textAreaElem.addEventListener('focus', moveElemAboveKeyboard);
        textAreaElem.addEventListener('blur', function() {
            menuBtnElem.style.cssText = originalElemCss;
        });
    </script>

</body>


</html>