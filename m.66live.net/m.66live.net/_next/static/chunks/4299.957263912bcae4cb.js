(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4299],{94299:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ts}});var a,i,s,l,r,o,c=n(69632),u=n(48103),d=n(3965),M=n(56682),N=n(77254),m=n(70650),E=n(83789),g=n(2019),I=n(65697),T=n(42656),A=n(96266),x=n(61714),L=n(54205),j=n(15438);function v(e){var t;let n=e.value,a=e.label,i=e.className,s=e.children,l=(0,L.useTranslations)(),r=(0,c._)((0,m.m9)(),2)[1],o=(0,j.Z)().show,d=(t=(0,A._)(function*(e){if(e.stopPropagation(),n)try{yield r(n),o({message:l("NORMAL.COPY_SUCCESS"),type:"info"})}catch(e){o({message:l("NORMAL.COPY_FAIL"),type:"error"})}}),function(e){return t.apply(this,arguments)});return(0,u.jsx)("button",{type:"button",className:(0,N.Z)("btn btn-neutral btn-xs rounded-box",i),onClick:d,children:null!=s?s:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x.Z,{size:16,variant:"Outline"}),null!=a?a:l("NORMAL.COPY")]})})}var D=e=>{var t,n;let a=e.link,i=e.className,s=e.iconProps,l=void 0===s?{}:s,r=(0,m.O_)(),o=(0,d.useMemo)(()=>r?new URL(a,window.location.href).toString():a,[a,r]);return(0,u.jsx)(v,{className:(0,N.Z)("flex-center flex size-8 rounded-full p-0.5 shadow-[0_2px_3px_0px_rgba(1,13,87,0.2)]",i),value:o,children:(0,u.jsx)(T.Z,{size:null!==(t=l.size)&&void 0!==t?t:20,variant:null!==(n=l.variant)&&void 0!==n?n:"Outline"})})},y=n(36533),C=(0,d.memo)(e=>{var t,n,a,i,s;let l=e.streamerId,r=e.className,o=(0,y.Z)(l).data;return(0,u.jsxs)("div",{className:(0,N.Z)("z-20 flex items-center justify-between px-5 py-[2px]",void 0===r?"":r),children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(g.Z,{className:"size-10",src:null==o?void 0:null===(t=o.Streamer)||void 0===t?void 0:t.HeaderImg,isLive:null==o?void 0:null===(n=o.Streamer)||void 0===n?void 0:n.IsOnAir}),(0,u.jsxs)("div",{className:"flex h-[44px] shrink-0 grow basis-0 flex-col items-start justify-between mobile:h-[40px]",children:[(0,u.jsx)("div",{className:"h-5 max-w-[180px] truncate font-noto-sans text-ss text-metal-700",children:null!==(s=null==o?void 0:null===(a=o.Streamer)||void 0===a?void 0:a.NickName)&&void 0!==s?s:""}),(0,u.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,u.jsx)("div",{className:"flex h-5 items-center justify-center",children:(0,u.jsx)(E.Z,{size:"16",color:"#CF222E",variant:"Bold"})}),(0,u.jsx)("span",{className:"h-5 text-sm font-normal leading-5 text-[#9BA4BA]",children:null==o?void 0:null===(i=o.Streamer)||void 0===i?void 0:i.FollowerCount})]})]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(I.Z,{className:"btn-circle",streamerId:l}),(0,u.jsx)(D,{iconProps:{size:16,variant:"Outline"},link:`/live/${l}`,className:"border-metal-400 bg-neutral-gradient text-base-100 mobile:hidden"})]})]})}),p=n(55329),S=n(33454),_=n(92674),z=n(65051),h=n(6360),O=n(86129),P=n(70472);function R(e){let t=e.className,n=(0,P.tv)();return(0,u.jsx)("button",{type:"button",className:t,onClick:e=>{e.stopPropagation(),n.push("/")},children:(0,u.jsx)(O.Z,{size:20,variant:"Outline"})})}var f=n(44506);function w(e){let t=e.onClick,n=e.className,a=(0,L.useTranslations)();return(0,u.jsx)("div",{className:n,children:(0,u.jsxs)("div",{className:"pointer-events-auto flex cursor-pointer items-center  justify-center gap-1 rounded-lg bg-black/60 px-4 py-2 text-sm text-neutral-0",onClick:()=>{t()},children:[(0,u.jsx)(f.Z,{size:"20",color:"white"}),(0,u.jsx)("p",{children:a("LIVE.VOL_UNMUTE")})]})})}var b=n(4715),k=n(21228);function U(e){let t=e.active,n=e.className,a=e.imgSize,i=void 0===a?36:a,s=e.onChange;return(0,u.jsx)("div",{className:(0,N.Z)("flex cursor-pointer items-center gap-0.5 font-roboto",n),onClick:e=>{e.stopPropagation(),s&&s(!t)},children:(0,u.jsx)(k.default,{className:"aspect-square",src:t?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nNDAnIGhlaWdodD0nNDAnIHZpZXdCb3g9JzAgMCA0MCA0MCcgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz4KICA8cGF0aAogICAgZmlsbC1ydWxlPSdldmVub2RkJwogICAgY2xpcC1ydWxlPSdldmVub2RkJwogICAgZD0nTTggNEM2Ljg5NTQzIDQgNiA0Ljk1NTEzIDYgNi4xMzMzM1YzMy44NjY3QzYgMzUuMDQ0OSA2Ljg5NTQzIDM2IDggMzZIMTRDMTUuMTA0NiAzNiAxNiAzNS4wNDQ5IDE2IDMzLjg2NjdWNi4xMzMzM0MxNiA0Ljk1NTEzIDE1LjEwNDYgNCAxNCA0SDhaTTI2IDRDMjQuODk1NCA0IDI0IDQuOTU1MTMgMjQgNi4xMzMzM1YzMy44NjY3QzI0IDM1LjA0NDkgMjQuODk1NCAzNiAyNiAzNkgzMkMzMy4xMDQ2IDM2IDM0IDM1LjA0NDkgMzQgMzMuODY2N1Y2LjEzMzMzQzM0IDQuOTU1MTMgMzMuMTA0NiA0IDMyIDRIMjZaJwogICAgZmlsbD0nd2hpdGUnCiAgLz4KPC9zdmc+":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nNDAnIGhlaWdodD0nNDAnIHZpZXdCb3g9JzAgMCA0MCA0MCcgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz4KICA8cGF0aAogICAgZD0nTTM3IDE4LjI2NzlDMzguMzMzMyAxOS4wMzc3IDM4LjMzMzMgMjAuOTYyMiAzNyAyMS43MzJMMTMgMzUuNTg4NUMxMS42NjY3IDM2LjM1ODMgMTAgMzUuMzk2IDEwIDMzLjg1NjRMMTAgNi4xNDM1OUMxMCA0LjYwMzk5IDExLjY2NjcgMy42NDE3NCAxMyA0LjQxMTU0TDM3IDE4LjI2NzlaJwogICAgZmlsbD0nd2hpdGUnCiAgLz4KPC9zdmc+",alt:"play icon",width:i,height:i})})}n(80980);var Y=n(62740);function Z(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,A._)(function*(e){return yield Y.Z.url("/api/Live/GetAudienceCSSSetting").options({cache:"no-store"}).query({streamerId:e}).post().json(e=>e.IsSuccess?e.Data:null)})).apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return(W=(0,A._)(function*(e){return yield Y.Z.url("/api/Member/GetLivePullCSSSetting").options({cache:"no-store"}).query({gameId:e}).post().json(e=>e.IsSuccess?e.Data:null)})).apply(this,arguments)}var G=n(99180),H=n(84734);let B="enable"===(0,G.Z)("ABR_ENABLE");(a=l||(l={}))[a.TRTC=0]="TRTC",a[a.LEB=1]="LEB";var F=l,J=n(9991);(i=r||(r={})).Day="D",i.Hour="H",i.Minute="M",i.Second="S";var K=e=>{let t=e.timeType,n=e.value,a=(0,L.useTranslations)("NORMAL.TIME_UNITS");return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"flex min-h-[60px] min-w-[49px] flex-col items-center rounded-lg bg-neutral-500 px-2 py-1",children:[(0,u.jsx)("div",{className:"font-akshar text-[32px] font-medium leading-tight text-neutral",children:n.toString().padStart(2,"0")}),(0,u.jsx)("div",{className:"font-noto-sans text-sm font-normal text-neutral-100",children:a(t)})]})})},$=e=>{let t=e.targetDateTime,n=void 0===t?new Date:t,a=e.onTimeUp,i=(0,L.useTranslations)(),s=e=>{let t=J.Z.duration((0,J.Z)(e).diff((0,J.Z)()));return{days:0>t.days()?0:t.days(),hours:0>t.hours()?0:t.hours(),minutes:0>t.minutes()?0:t.minutes(),seconds:0>t.seconds()?0:t.seconds()}},l=(0,c._)((0,d.useState)(()=>s(n)),2),o=l[0],M=l[1];return(0,d.useEffect)(()=>{let e;return(o.days>=0||o.hours>=0||o.minutes>=0||o.seconds>0)&&(e=window.setTimeout(()=>{M(s(n))},1e3)),o.days<=0&&o.hours<=0&&o.minutes<=0&&o.seconds<=0&&a(),()=>{e&&window.clearTimeout(e)}},[o,n,a]),(0,u.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 bg-black desktop:rounded",children:[(0,u.jsx)("div",{className:"font-title self-center text-center text-base text-white",children:i("LIVE.COUNTDOWN_START_UNTIL")}),(0,u.jsxs)("div",{className:"flex gap-4 self-center",children:[(0,u.jsx)(K,{timeType:r.Day,value:o.days}),(0,u.jsx)(K,{timeType:r.Hour,value:o.hours}),(0,u.jsx)(K,{timeType:r.Minute,value:o.minutes}),(0,u.jsx)(K,{timeType:r.Second,value:o.seconds})]})]})},X=n(11838),q=n(36865),ee=n(16353);function et(){let e=(0,L.useTranslations)(),t=(0,ee.Z)({},2),n=t.data,a=t.isPending;return(0,u.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-x-4 gap-y-2 bg-black desktop:rounded",children:[(0,u.jsx)("div",{className:"font-title self-center text-center text-base text-white",children:e("LIVE.STREAMER_REST")}),(0,u.jsx)(q.Z,{className:"mx-4 flex flex-nowrap gap-4",videos:null==n?void 0:n.filter(e=>0===e.HeatType),isLoading:a,skeletonCount:2,cardClassName:"grow-1 mobile:w-[9.5rem] desktop:w-[300px]"})]})}(s=o||(o={}))[s.FullScreen=0]="FullScreen",s[s.Exit_FullScreen=1]="Exit_FullScreen",s[s.Volume=2]="Volume",s[s.Muted=3]="Muted",s[s.Interactive=4]="Interactive",s[s.PIP=5]="PIP",s[s.PLAY=6]="PLAY",s[s.PAUSE=7]="PAUSE",s[s.PROTOCOL=8]="PROTOCOL",s[s.RESUME=9]="RESUME";var en=n(17818);function ea(e){var t,n;let a=e.type,i=e.streamerId,s=e.isStreaming,l=e.isOnAir,r=e.isFetchingLiveAudience,M=e.refetchLiveAudience,N=e.resumeVisible,m=e.handleChange,E=e.errorCode,g=e.placement,I=(0,L.useTranslations)(),T=(0,y.Z)(i,"event"===g),A=T.data,x=T.refetch,j=(0,c._)((n=null==A?void 0:null===(t=A.Game)||void 0===t?void 0:t.GameDate,(0,d.useMemo)(()=>{let e=(0,J.Z)(n);return[(0,X.Z)(n)?-1:e.diff((0,J.Z)()),e]},[n])),2),v=j[0],D=j[1],C={[en.AZ.PLAY_HLS_ATTEMPT_TIMEOUT]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_WEBRTC_ATTEMPT_TIMEOUT]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_HLS_NETWORK]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_HLS_MEDIA_FAIL]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_HLS_GENERAL]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_HLS_NOT_SUPPORT]:"LIVE.HLS_NOT_SUPPORTED",[en.AZ.PLAY_ERR_WEBRTC_FAIL]:"LIVE.WEBRTC_NOT_SUPPORTED",[en.AZ.PLAY_ERR_REQUEST_PULL_FAIL]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_SERVER_DISCONNECT]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_DECODE_FAIL]:"LIVE.PLAY_FAIL",[en.AZ.PLAY_ERR_NO_PUBLISH]:"LIVE.BACK_SOON"};return s&&l?null:l&&N?(0,u.jsx)("div",{"data-big-play-btn":!0,className:"absolute left-1/2 top-1/2 translate-x-[-20px] translate-y-[-20px]",children:(0,u.jsx)(U,{active:!0,imgSize:40,onChange:e=>m({name:o.RESUME})})}):l&&!N?(0,u.jsxs)("div",{className:"z-20 flex aspect-video w-full flex-col gap-6 bg-black flex-center desktop:rounded",children:[(0,u.jsx)("h3",{className:"text-center text-base font-normal text-white font-title",children:I(isNaN(E)||!C[E]?"LIVE.BACK_SOON":C[E])}),!isNaN(E)&&(0,u.jsxs)("p",{className:"text-sm text-metal-500",children:["code: ",E]}),a===F.LEB&&(0,u.jsx)("button",{type:"button","data-active":r,className:"btn btn-link btn-sm z-30 text-neutral-50",onClick:e=>{e.stopPropagation(),M()},children:I(r?"LIVE.VIDEO_LOADING":"LIVE.TRY_AGAIN")})]}):v>0?(0,u.jsx)("div",{className:"z-20 aspect-video w-full bg-black desktop:rounded",children:(0,u.jsx)($,{targetDateTime:D,onTimeUp:()=>x()})}):(0,u.jsx)("div",{className:"z-20 aspect-video w-full bg-black desktop:rounded ",children:(0,u.jsx)(et,{})})}var ei=n(59453),es=n(68503);function el(){return(el=(0,A._)(function*(e,t,n,a,i,s,l){return yield Y.Z.url("/api/System/LogStreamingError").post({streamName:e,streamerNickName:t,errorType:n,errorCode:a,errorMsg:i,token:s,pullSrc:l}).json()})).apply(this,arguments)}n(31424);var er=n(6320),eo=n(76920),ec=n(30780);function eu(){return(eu=(0,A._)(function*(e){return ec.Z.isEnabled&&(yield ec.Z.request(e)),ec.Z.isEnabled})).apply(this,arguments)}function ed(){return(ed=(0,A._)(function*(){return ec.Z.isEnabled&&(yield ec.Z.exit()),ec.Z.isEnabled})).apply(this,arguments)}let eM=(0,d.forwardRef)((e,t)=>{var n;let a=e.isWebRTC,i=e.sourceUrl,s=e.sessionVol,l=e.streamerNickName,r=e.onStatusChange,o=e.onLoad,c=e.onLoaded,M=e.onVolume,N=e.changeProtocol,m=e.changeResolution,E=e.onBlocked,g=e.refetchLiveAudience,I=e.onErrorHandler,T=e.onLoadingHard,x=(0,d.useRef)(NaN),L=(0,d.useRef)(NaN),j=(0,d.useRef)(0),v="ios"===(0,eo.Z)().device.current,D=(0,er.useMyMission)().triggerMission,y=(0,d.useCallback)(()=>{c(),isNaN(L.current)||(window.clearTimeout(L.current),L.current=NaN)},[c]),C=(0,d.useCallback)(()=>{L.current=window.setTimeout(()=>{r(!1),y()},1e4)},[y,r]),p=(0,d.useCallback)(()=>{o(),isNaN(L.current)||(window.clearTimeout(L.current),L.current=NaN),C()},[o,C]),S=(0,d.useCallback)(e=>{var t,n;let a;r(!0),y(),s.muted&&(en.ZP.videoElement.muted=s.muted),en.ZP.videoElement.volume=s.sessionVolume,M(en.ZP.videoElement.muted,en.ZP.videoElement.volume),m((t=en.ZP.videoElement.videoWidth,n=en.ZP.videoElement.videoHeight,a="SD",t>=1280&&n>=720&&(a="HD"),t>=1920&&n>=1080&&(a="FHD"),t>=2e3&&n<=1080&&(a="2K"),t>=3840&&n<=2160&&(a="4K"),a)),j.current=0,D()},[s]),_=(0,d.useCallback)(e=>{window.clearTimeout(e),x.current=NaN},[]);(0,d.useEffect)(()=>{isNaN(x.current)||_(x.current),isNaN(L.current)||(window.clearTimeout(L.current),L.current=NaN)},[i,_]);let z=(0,d.useCallback)(()=>{r(!0),y()},[]),h=(0,d.useCallback)(e=>{let t=e.detail,n=t.code;t.data,n===en.EO.PLAY_EVT_PLAY_WAITING_BEGIN&&(isNaN(x.current)||_(x.current),x.current=window.setTimeout(()=>{r(!1),p(),x.current=NaN,en.ZP.videoElement.addEventListener("timeupdate",z,{once:!0})},2e3)),n===en.EO.PLAY_EVT_PLAY_WAITING_STOP&&(isNaN(x.current)||_(x.current),r(!0),y(),en.ZP.videoElement.removeEventListener("timeupdate",z))},[r,p,y,2e3,_]),O=(0,d.useCallback)(()=>{en.ZP.videoElement.play()},[]),P=(0,d.useCallback)(e=>{var t,n;let i=e.detail,s=i.code,o=i.data;if(s===en.AZ.PLAY_HLS_ATTEMPT_TIMEOUT||s===en.AZ.PLAY_WEBRTC_ATTEMPT_TIMEOUT){null==T||T();return}if((null==o?void 0:o.message)&&s===en.AZ.PLAY_ERR_REQUEST_PULL_FAIL&&(null==o?void 0:null===(t=o.message)||void 0===t?void 0:t.includes("auth_failed"))&&j.current<=2&&(g(),j.current++,r(!1),y()),s===en.AZ.PLAY_ERR_NOT_ALLOWED||(null==o?void 0:null===(n=o.message)||void 0===n?void 0:n.toString().includes("NotAllowedError"))){E(),r(!1),y();return}let c=(null==o?void 0:o.message)||"";r(!1),I(s),y(),(null==o?void 0:o.message)!=="Play attempt time out"&&s!==en.AZ.PLAY_ERR_PLAY_FAIL&&function(e,t,n,a,i,s,l){el.apply(this,arguments)}("",l||"",a?"webRTC":"hls",(null==s?void 0:s.toString())||"0",c.toString(),"",(null==o?void 0:o.src)||"")},[y,r,g,a,l,E,I]),R=(0,d.useCallback)(()=>{M(en.ZP.videoElement.muted,en.ZP.videoElement.volume)},[M]),f=(0,d.useCallback)(e=>{!document.pictureInPictureElement&&(e.detail.data.network.quality>=en.s8.NORMAL?a&&N(!1):a||N(!0))},[N,a]),w=(0,d.useCallback)(e=>{r(!1),p()},[r,p]),b=(0,d.useCallback)(()=>{en.ZP.videoElement.addEventListener("playing",S),en.ZP.videoElement.addEventListener(en.Op.WEBRTC_EVENT,h),en.ZP.videoElement.addEventListener(en.Op.WEBRTC_STATS,f),en.ZP.videoElement.addEventListener("fullscreenchange",O),en.ZP.videoElement.addEventListener("waiting",w),en.ZP.videoElement.addEventListener(en.Op.RS_ERROR,P),en.ZP.videoElement.addEventListener("volumechange",R)},[S,h,f,P,O,R]),k=(0,d.useCallback)((0,A._)(function*(){en.ZP.videoElement.removeEventListener("playing",S),en.ZP.videoElement.removeEventListener(en.Op.WEBRTC_EVENT,h),en.ZP.videoElement.removeEventListener(en.Op.WEBRTC_STATS,f),en.ZP.videoElement.removeEventListener("waiting",w),en.ZP.videoElement.removeEventListener(en.Op.RS_ERROR,P),en.ZP.videoElement.removeEventListener("fullscreenchange",O),en.ZP.videoElement.removeEventListener("volumechange",R),document.pictureInPictureElement||(yield en.ZP.clearVideo())}),[S,h,f,P,O,R]);(0,d.useImperativeHandle)(t,()=>({removePlayerListener:()=>{k()}}));let U=(0,d.useCallback)((n=(0,A._)(function*(e){if(e){if(document.pictureInPictureElement){if(i===en.ZP.getSourceUrl()){b(),en.ZP.mountVideo(e);return}a&&en.ZP.switchWebRTC(i)}if(i)try{if(b(),yield en.ZP.addVideo(e,i,a?"webrtc":"hls",v),v&&!a){let e=document.getElementById("for_airplay"),t=document.createElement("source");t.id="for_airplay",t.type="application/x-mpegURL",t.src=i,e?en.ZP.videoElement.replaceChild(e,t):en.ZP.videoElement.appendChild(t)}}catch(e){console.warn("player init error:",e)}}else try{isNaN(x.current)||_(x.current),yield k()}catch(e){console.warn("player destroy error:",e)}}),function(e){return n.apply(this,arguments)}),[i]);return(0,u.jsx)("div",{className:"relative aspect-video size-full bg-black",ref:U})});eM.displayName="BaseLEB";var eN=(0,d.memo)(eM,(e,t)=>e.sourceUrl===t.sourceUrl&&e.streamerNickName===t.streamerNickName&&e.isWebRTC===t.isWebRTC),em=n(71931),eE=n(46927),eg=n(28778),eI=n(27156),eT=n(55934),eA=n(64384),ex=n(97904),eL=e=>{let t=e.streamerId,n=e.placement,a=e.getPlayerRef,i=e.onStreamConnect,s=e.onStreamDisconnect,l=e.onStreamerOnLive,r=(0,es.ZP)().isWebRTC,o=(0,d.useRef)(0),c=(0,eg.useQueryClient)(),u=(0,d.useCallback)(e=>{c.setQueryData(["/Live/GetAudienceCSSSetting",t,n],t=>t?(0,eT.Z)(t,e):t)},[t,n]),M=(0,d.useCallback)(e=>{e===t.toString()&&(o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(i,r?1500:7500))},[r,t]),N=(0,d.useCallback)(e=>{if(e===t.toString()){let e=a();null==e||e.removePlayerListener(),s()}},[t]),m=(0,d.useCallback)(e=>{t&&(c.setQueryData(["/Live/GetLiveRoomInfo",t,!1],t=>(null==t?void 0:t.Streamer)?(0,eI.Uy)(t,t=>{t.Streamer.IsOnAir=e}):t),c.refetchQueries({queryKey:["/Live/GetLiveRoomInfo",t,!1]}),l(e))},[t]),E=(0,d.useCallback)(e=>{t&&(c.setQueryData(["/Live/GetLiveRoomInfo",t,!1],n=>{var a;return n?(null===(a=n.Game)||void 0===a?void 0:a.GameID)===e.GameId?(0,eI.Uy)(n,t=>{t.Game.HomeTeamScore=e.HomeTeamScore,t.Game.AwayTeamScore=e.AwayTeamScore}):(c.refetchQueries({queryKey:["/Live/GetLiveRoomInfo",t,!1],type:"active",fetchStatus:"idle"}),n):n}),e.GameRecords&&c.setQueryData(["/Game/GameWithRecords",e.GameId],t=>t&&t.GameID===e.GameId?(0,eI.Uy)(t,t=>{t.HomeTeamScore=e.HomeTeamScore,t.AwayTeamScore=e.AwayTeamScore,t.GameStatusID=e.GameStatus,t.GameTypeID===em.D$.basketball?t.BasketballGameRecords=(0,eA.H)(e.GameRecords):t.GameTypeID===em.D$.soccer&&(t.SoccerGameRecords=(0,ex.H)(e.GameRecords))}):t))},[t]);return(0,eE.Z)("UpdateRoomId",u),(0,eE.Z)("StreamerConnect",M),(0,eE.Z)("StreamerDisconnect",N),(0,eE.Z)("StreamerOnLive",m),(0,eE.Z)("UpdateGameStatus",E),(0,d.useEffect)(()=>()=>window.clearTimeout(o.current),[t]),{cancelConnectDelay:()=>window.clearTimeout(o.current)}},ej=n(598),ev=n(10828),eD=n(51626),ey=n(89680),eC=n(69045);let ep=(0,eD.Ue)()((0,ey.tJ)(e=>({isBulletEnabled:!0,setBulletEnabled:t=>e({isBulletEnabled:t})}),{name:eC.x_,version:1,storage:(0,ey.FL)(()=>localStorage)}));function eS(e){let t=e.className,n=ep(),a=n.isBulletEnabled,i=n.setBulletEnabled;return(0,u.jsxs)("button",{type:"button",className:(0,N.Z)("swap size-5 mobile:size-8",{"swap-active":a},t),onClick:e=>{e.stopPropagation(),i(!a)},children:[(0,u.jsx)(ej.Z,{variant:"Outline",className:"swap-on",size:20}),(0,u.jsx)(ev.Z,{variant:"Outline",className:"swap-off",size:20})]})}var e_=n(63834),ez=n(30762);let eh=e=>{let t=cast.framework.CastContext.getInstance().getCurrentSession();if(t){let n=new chrome.cast.media.MediaInfo(e,"application/x-mpegURL");n.streamType=chrome.cast.media.StreamType.BUFFERED;let a=new chrome.cast.media.LoadRequest(n);t.loadMedia(a).then(()=>{console.info("[Chrome Cast] Load media succeed")}).catch(e=>{e instanceof SyntaxError&&alert("Syntax Error. Check input. \nError: "+e.message)})}},eO=()=>{try{cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,androidReceiverCompatible:!0})}catch(e){console.warn("[Chrome Cast] not support",e)}},eP=e=>{let t=cast.framework.CastContext.getInstance();return t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,e),()=>{t.removeEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,e)}},eR=()=>{if(!window.chrome||!window.chrome.cast||!window.cast)return;let e=cast.framework.CastContext.getInstance();e.getCurrentSession()&&e.endCurrentSession(!0)},ef=()=>{if(!window.chrome||!window.chrome.cast||!window.cast)return;let e=new cast.framework.RemotePlayer;new cast.framework.RemotePlayerController(e).playOrPause()};var ew=n(79496),eb=e=>{let t=e.className,n=(0,L.useTranslations)(),a=(0,j.Z)(e=>e.show);return(0,u.jsx)("button",{className:(0,N.Z)("cursor-pointer",t),onClick:()=>{let e=en.ZP.videoElement;e&&(e.requestPictureInPicture?e.requestPictureInPicture().catch(()=>{a({message:n("NORMAL.SYSTEM_NOT_SUPPORT"),type:"error"})}):a({message:n("NORMAL.SYSTEM_NOT_SUPPORT"),type:"error"}))},children:(0,u.jsx)(ew.vB,{className:"size-5"})})},ek=n(68491),eU=n(99106),eY=n(17831),eZ=e=>{let t=e.title,n=e.children;return(0,u.jsxs)("div",{className:"flex w-full flex-col items-center gap-4 pb-6",children:[(0,u.jsx)("span",{className:"font-bold text-metal-700",children:t}),n]})},eQ=e=>{let t=e.className,n=e.children;return(0,u.jsx)("div",{className:(0,N.Z)("flex w-full items-center text-ss text-metal-700",t),children:n})},eV=()=>(0,u.jsx)("hr",{className:"mb-6 w-full bg-metal-300"}),eW=n(97636),eG=e=>{let t=e.onClick,n=e.text,a=e.icon;return(0,u.jsx)(eW.Z,{className:"h-auto flex-1 rounded-lg border border-metal-400 bg-neutral-0 px-6 py-2 hover:!border-metal-400 focus:!bg-metal-100",type:"button",shape:"normal",onClick:t,children:(0,u.jsxs)("div",{className:"flex-col gap-2 flex-center",children:[a,(0,u.jsx)("span",{className:"text-ss text-metal-700",children:n})]})})},eH=e=>{let t=e.open,n=e.onClose,a=e.streamerId,i=e.placement,s=void 0===i?"liveroom":i,l=(0,L.useTranslations)(),r=(0,j.Z)(e=>e.show),o=(0,eo.Z)(e=>e.device.current),c=!!window.cast,M=(0,H.useQuery)({queryKey:["/Live/GetAudienceCSSSetting",a,s],queryFn:()=>"event"===s?V(a):Z(a),refetchOnWindowFocus:!1}).data,N=()=>{let e=M||{},t=e.RoomId,n=e.Token,a=e.TxSecret,i=e.TxTime,s=e.Server;return(e.CSSecreates,[t,s,n,a,i].some(e=>void 0===e))?"":`${null==s?void 0:s.replace("webrtc","http")}${t}.m3u8?txSecret=${a}&txTime=${i}&token=${n}`};return(0,d.useEffect)(()=>{let e=()=>{en.ZP.videoElement.play()};return en.ZP.videoElement.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",e),()=>{en.ZP.videoElement.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",e)}},[]),(0,u.jsx)(eY.Z,{isOpen:t,onClose:n,className:"bg-metal-10",children:(0,u.jsxs)("div",{className:"w-72 flex-col flex-center",children:[(0,u.jsx)(eZ,{title:l("LIVE.CHOOSE_CAST_TYPE"),children:(0,u.jsxs)("div",{className:"flex w-full gap-4",children:[(c||"android"===o)&&(0,u.jsx)(eG,{icon:(0,u.jsx)(ew.b3,{}),text:"TV",onClick:()=>{if(!window.chrome||!window.chrome.cast||!window.cast){r({type:"error",message:l("NORMAL.SYSTEM_NOT_SUPPORT")});return}eO();let e=document.querySelector("google-cast-launcher");if((null==e?void 0:e.style.display)!=="none"){e.click(),n();let t=eP(e=>{switch(e.castState){case cast.framework.CastState.CONNECTED:console.info("[Chrome Cast] Connected"),eh(N()),t();break;case cast.framework.CastState.NOT_CONNECTED:console.info("[Chrome Cast] Not connected"),t();break;case cast.framework.CastState.CONNECTING:console.info("[Chrome Cast] Connecting");break;case cast.framework.CastState.NO_DEVICES_AVAILABLE:console.info("[Chrome Cast] No devices available"),t()}})}else r({type:"error",message:l("NORMAL.SYSTEM_NOT_SUPPORT")})}}),"ios"===o&&(0,u.jsx)(eG,{icon:(0,u.jsx)(ew.y3,{}),text:"AirPlay",onClick:()=>{window.WebKitPlaybackTargetAvailabilityEvent&&en.ZP.videoElement.webkitShowPlaybackTargetPicker?"webrtc"===en.ZP.getCurrentProtocolType()?r({type:"info",message:l("LIVE.PLEASE_CHANGE_TO_HLS")}):(en.ZP.videoElement.webkitShowPlaybackTargetPicker(),n()):r({type:"error",message:l("NORMAL.SYSTEM_NOT_SUPPORT")})}})]})}),(0,u.jsx)(eV,{}),(0,u.jsx)(eZ,{title:l("LIVE.CAST_TO_TV_WAY"),children:(0,u.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,u.jsxs)("span",{className:"flex items-center gap-2",children:[(0,u.jsx)(ew.kV,{width:24,height:24}),(0,u.jsx)(eQ,{className:"gap-2",children:l("LIVE.CONFIRM_WIFI")})]}),(0,u.jsxs)("span",{className:"flex items-center gap-2",children:[(0,u.jsx)(eU.Z,{size:24}),(0,u.jsx)(eQ,{className:"gap-2",children:l("LIVE.CONFIRM_SUPPORT_CAST")})]})]})}),(0,u.jsx)(eV,{}),(0,u.jsx)(eZ,{title:l("LIVE.WHY_CAST_FAIL"),children:(0,u.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,u.jsxs)(eQ,{children:["1. ",l("LIVE.NOT_SAME_WIFI")]}),(0,u.jsxs)(eQ,{children:["2. ",l("LIVE.CAST_PROTOCOL_NOT_SUPPORT")]}),(0,u.jsxs)(eQ,{children:["3. ",l("LIVE.AIRPLAY_ONLY_SUPPORT_HLS")]})]})})]})})},eB=e=>{let t=e.streamerId,n=e.className,a=e.placement,i=(0,c._)((0,d.useState)(!1),2),s=i[0],l=i[1],r=(0,e_.Z)().token,o=(0,d.useCallback)(()=>{eO()},[]);return r&&(0,u.jsxs)("div",{className:(0,N.Z)("cursor-pointer",n),onClick:()=>l(!0),children:[(0,u.jsx)(eU.Z,{size:20,className:"text-neutral-0"}),(0,u.jsx)(eH,{open:s,streamerId:t,onClose:()=>l(!1),placement:void 0===a?"liveroom":a}),(0,u.jsx)("google-cast-launcher",{ref:o,style:{opacity:0,height:0,width:0,position:"absolute",zIndex:0}})]})},eF=e=>{let t=e.isFullScreen,n=e.onChange,a=e.className;return(0,u.jsxs)("button",{type:"button",className:(0,N.Z)("swap size-5 mobile:size-8",{"swap-active":t},a),onClick:e=>{e.stopPropagation(),n((0,_._)((0,S._)({},e),{name:t?o.Exit_FullScreen:o.FullScreen}))},children:[(0,u.jsx)(k.default,{className:"swap-on",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyLjcyNzMgNC41NDU0M0MxMi43MjczIDYuMDUxNjYgMTMuOTQ4MyA3LjI3MjcxIDE1LjQ1NDUgNy4yNzI3MUgxOS4wOTA5QzE5LjU5MyA3LjI3MjcxIDIwIDYuODY1NjkgMjAgNi4zNjM2MUMyMCA1Ljg2MTU0IDE5LjU5MyA1LjQ1NDUyIDE5LjA5MDkgNS40NTQ1MkgxNS40NTQ1QzE0Ljk1MjUgNS40NTQ1MiAxNC41NDU1IDUuMDQ3NTEgMTQuNTQ1NSA0LjU0NTQzVjAuOTA5MDY5QzE0LjU0NTUgMC40MDY5OTYgMTQuMTM4NSAtMi4xOTM0NWUtMDUgMTMuNjM2NCAtMi4xOTM0NWUtMDVDMTMuMTM0MyAtMi4xOTM0NWUtMDUgMTIuNzI3MyAwLjQwNjk5NiAxMi43MjczIDAuOTA5MDY5VjQuNTQ1NDNaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTIuNzI3MyAxOS4wOTA5QzEyLjcyNzMgMTkuNTkzIDEzLjEzNDMgMjAgMTMuNjM2NCAyMEMxNC4xMzg1IDIwIDE0LjU0NTUgMTkuNTkzIDE0LjU0NTUgMTkuMDkwOVYxNS40NTQ1QzE0LjU0NTUgMTQuOTUyNSAxNC45NTI1IDE0LjU0NTUgMTUuNDU0NSAxNC41NDU1SDE5LjA5MDlDMTkuNTkzIDE0LjU0NTUgMjAgMTQuMTM4NSAyMCAxMy42MzY0QzIwIDEzLjEzNDMgMTkuNTkzIDEyLjcyNzMgMTkuMDkwOSAxMi43MjczSDE1LjQ1NDVDMTMuOTQ4MyAxMi43MjczIDEyLjcyNzMgMTMuOTQ4MyAxMi43MjczIDE1LjQ1NDVWMTkuMDkwOVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00LjU0NTQ2IDE0LjU0NTVIMC45MDkwOTJDMC40MDcwMTkgMTQuNTQ1NSA5LjUzNjc0ZS0wNyAxNC4xMzg1IDkuNTM2NzRlLTA3IDEzLjYzNjRDOS41MzY3NGUtMDcgMTMuMTM0MyAwLjQwNzAxOSAxMi43MjczIDAuOTA5MDkyIDEyLjcyNzNINC41NDU0NkM2LjA1MTY4IDEyLjcyNzMgNy4yNzI3MyAxMy45NDgzIDcuMjcyNzMgMTUuNDU0NVYxOS4wOTA5QzcuMjcyNzMgMTkuNTkzIDYuODY1NzEgMjAgNi4zNjM2NCAyMEM1Ljg2MTU2IDIwIDUuNDU0NTUgMTkuNTkzIDUuNDU0NTUgMTkuMDkwOVYxNS40NTQ1QzUuNDU0NTUgMTQuOTUyNSA1LjA0NzUzIDE0LjU0NTUgNC41NDU0NiAxNC41NDU1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTcuMjcyNzMgMC45MDkwNjlDNy4yNzI3MyAwLjQwNjk5NiA2Ljg2NTcxIC0yLjE5MzQ1ZS0wNSA2LjM2MzY0IC0yLjE5MzQ1ZS0wNUM1Ljg2MTU2IC0yLjE5MzQ1ZS0wNSA1LjQ1NDU1IDAuNDA2OTk2IDUuNDU0NTUgMC45MDkwNjlWNC41NDU0M0M1LjQ1NDU1IDUuMDQ3NTEgNS4wNDc1MyA1LjQ1NDUyIDQuNTQ1NDYgNS40NTQ1MkgwLjkwOTA5MkMwLjQwNzAxOSA1LjQ1NDUyIDkuNTM2NzRlLTA3IDUuODYxNTQgOS41MzY3NGUtMDcgNi4zNjM2MUM5LjUzNjc0ZS0wNyA2Ljg2NTY5IDAuNDA3MDE5IDcuMjcyNzEgMC45MDkwOTIgNy4yNzI3MUg0LjU0NTQ2QzYuMDUxNjggNy4yNzI3MSA3LjI3MjczIDYuMDUxNjYgNy4yNzI3MyA0LjU0NTQzVjAuOTA5MDY5WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",alt:"exit fullscreen",width:20,height:20}),(0,u.jsx)(k.default,{className:"swap-off",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE5IDMuNzI3MjdDMTkgMi4yMjEwNSAxNy43NzkgMSAxNi4yNzI3IDFIMTIuNjM2NEMxMi4xMzQzIDEgMTEuNzI3MyAxLjQwNzAyIDExLjcyNzMgMS45MDkwOUMxMS43MjczIDIuNDExMTYgMTIuMTM0MyAyLjgxODE4IDEyLjYzNjQgMi44MTgxOEgxNi4yNzI3QzE2Ljc3NDggMi44MTgxOCAxNy4xODE4IDMuMjI1MiAxNy4xODE4IDMuNzI3MjdWNy4zNjM2NEMxNy4xODE4IDcuODY1NzEgMTcuNTg4OCA4LjI3MjczIDE4LjA5MDkgOC4yNzI3M0MxOC41OTMgOC4yNzI3MyAxOSA3Ljg2NTcxIDE5IDcuMzYzNjRWMy43MjcyN1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xOSAxMi42MzY0QzE5IDEyLjEzNDMgMTguNTkzIDExLjcyNzMgMTguMDkwOSAxMS43MjczQzE3LjU4ODggMTEuNzI3MyAxNy4xODE4IDEyLjEzNDMgMTcuMTgxOCAxMi42MzY0VjE2LjI3MjdDMTcuMTgxOCAxNi43NzQ4IDE2Ljc3NDggMTcuMTgxOCAxNi4yNzI3IDE3LjE4MThIMTIuNjM2NEMxMi4xMzQzIDE3LjE4MTggMTEuNzI3MyAxNy41ODg4IDExLjcyNzMgMTguMDkwOUMxMS43MjczIDE4LjU5MyAxMi4xMzQzIDE5IDEyLjYzNjQgMTlIMTYuMjcyN0MxNy43NzkgMTkgMTkgMTcuNzc5IDE5IDE2LjI3MjdWMTIuNjM2NFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0zLjcyNzI3IDE3LjE4MThINy4zNjM2NEM3Ljg2NTcxIDE3LjE4MTggOC4yNzI3MyAxNy41ODg4IDguMjcyNzMgMTguMDkwOUM4LjI3MjczIDE4LjU5MyA3Ljg2NTcxIDE5IDcuMzYzNjQgMTlIMy43MjcyN0MyLjIyMTA1IDE5IDEgMTcuNzc5IDEgMTYuMjcyN1YxMi42MzY0QzEgMTIuMTM0MyAxLjQwNzAyIDExLjcyNzMgMS45MDkwOSAxMS43MjczQzIuNDExMTYgMTEuNzI3MyAyLjgxODE4IDEyLjEzNDMgMi44MTgxOCAxMi42MzY0VjE2LjI3MjdDMi44MTgxOCAxNi43NzQ4IDMuMjI1MiAxNy4xODE4IDMuNzI3MjcgMTcuMTgxOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xIDcuMzYzNjRDMSA3Ljg2NTcxIDEuNDA3MDIgOC4yNzI3MyAxLjkwOTA5IDguMjcyNzNDMi40MTExNiA4LjI3MjczIDIuODE4MTggNy44NjU3MSAyLjgxODE4IDcuMzYzNjRWMy43MjcyN0MyLjgxODE4IDMuMjI1MiAzLjIyNTIgMi44MTgxOCAzLjcyNzI3IDIuODE4MThINy4zNjM2NEM3Ljg2NTcxIDIuODE4MTggOC4yNzI3MyAyLjQxMTE2IDguMjcyNzMgMS45MDkwOUM4LjI3MjczIDEuNDA3MDIgNy44NjU3MSAxIDcuMzYzNjQgMUgzLjcyNzI3QzIuMjIxMDUgMSAxIDIuMjIxMDUgMSAzLjcyNzI3VjcuMzYzNjRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",alt:"fullscreen",width:20,height:20})]})},eJ=e=>{e.resolution;let t=e.isWebRTC,n=e.onChange,a=(0,c._)((0,d.useState)(!1),2),i=a[0],s=a[1],l=(0,d.useRef)(null);(0,m.t$)(l,()=>{s(!1)});let r=(0,M.f)("mobile"),o=(0,ez.Z)(e=>!!e.token),N=(0,es.ZP)(),E=N.toggleSignInModal,g=N.signInModalOpened,I=(0,L.useTranslations)();return(0,u.jsxs)("div",{ref:l,className:"relative mb-[6px] text-sm desktop:mb-0 ",onClick:e=>{e.stopPropagation(),o||g||(s(!1),E(!0,!1))},children:[i&&(0,u.jsx)("div",{className:"absolute inset-x-0 bottom-10 -ml-8 flex min-w-20 flex-col px-2 mobile:bottom-11",children:["fast","smooth"].map((e,a)=>(0,u.jsx)("button",{"data-active":"fast"===e?t:!t,onClick:()=>{s(!1),n("fast"===e)},className:"bg-black/50 py-2 hover:text-orange-400 data-active:text-orange-400 mobile:py-1",children:(0,u.jsx)("div",{children:"fast"===e?r?I("LIVE.PROTOCOL_M_FAST"):I("LIVE.PROTOCOL_FAST"):r?I("LIVE.PROTOCOL_M_SMOOTH"):I("LIVE.PROTOCOL_SMOOTH")})},a))}),(0,u.jsx)("div",{className:"cursor-pointer whitespace-nowrap text-nowrap text-center text-white",onClick:()=>{s(!0)},children:(0,u.jsx)("div",{children:t?r?I("LIVE.PROTOCOL_M_FAST"):I("LIVE.PROTOCOL_FAST"):r?I("LIVE.PROTOCOL_M_SMOOTH"):I("LIVE.PROTOCOL_SMOOTH")})})]})},eK=n(74391),e$=n(77956),eX=e=>{let t=e.className,n=e.volume,a=e.muted,i=e.onChange,s=e.onInteractive,l=e.onMuted,r=(0,d.useRef)(null);return(0,u.jsxs)("div",{className:(0,N.Z)("inline-flex items-center gap-2",t),onMouseDown:e=>{null==s||s()},children:[(0,u.jsx)("div",{className:" cursor-pointer",onClick:e=>{e.stopPropagation(),null==l||l(!a)},children:a?(0,u.jsx)(f.Z,{size:"20",color:"white"}):n<.5?(0,u.jsx)(eK.Z,{size:"20",color:"white"}):(0,u.jsx)(e$.Z,{size:"20",color:"white"})}),(0,u.jsx)("input",{ref:r,type:"range",min:"0",max:"100",value:a?0:100*n,className:"hidden h-2 max-w-[70px] cursor-pointer rounded-lg bg-gray-500 text-metal-50 accent-gray-100 desktop:inline-flex",onMouseDown:e=>{null==i||i(.01*+r.current.value,!0)},onMouseUp:e=>{null==i||i(.01*+r.current.value,!0)},onChange:e=>{null==i||i(.01*+e.target.value,!1)}})]})},eq=e=>{var t,n,a,i,s,l,r,m;let E=e.className,g=e.volume,I=e.muted,T=e.isFullscreen,x=e.streamerId,L=e.onChange,j=e.isPlay,v=e.videoVisible,D=e.isWebRTC,C=e.resolution,p=e.placement,S=(0,M.f)("mobile"),_=(0,y.Z)(x,"event"===p).data,h=(0,z.usePathname)().replaceAll("/",""),O=["","home"].some(e=>e===h),P=(0,c._)((0,d.useState)(!1),2),R=P[0],f=P[1];return(0,d.useEffect)(()=>{var e;(e=(0,A._)(function*(){f((yield en.ZP.getSupported()).webrtcSupported&&!O)}),function(){return e.apply(this,arguments)})()},[O]),(0,u.jsxs)("div",{className:(0,N.Z)("flex w-full flex-nowrap justify-between gap-3 px-5 py-2 text-white desktop:bg-black/75 desktop:py-4 mobile:bg-gradient-to-t mobile:from-black/75",E),children:[(0,u.jsxs)("div",{className:"flex w-full justify-start gap-4 overflow-hidden",children:[!S&&(0,u.jsx)(U,{active:j,imgSize:20,onChange:e=>{L({name:e?o.PLAY:o.PAUSE,value:e})}}),(0,u.jsxs)("div",{className:"flex w-1/2  gap-2 overflow-hidden mobile:max-w-[55vw] mobile:flex-col",children:[(0,u.jsx)("h1",{className:"shrink-0 truncate desktop:max-w-[50%] mobile:text-ss mobile:leading-[normal]",children:null!==(s=null==_?void 0:null===(t=_.Game)||void 0===t?void 0:t.LeagueName)&&void 0!==s?s:"-"}),(0,u.jsxs)("p",{className:"flex shrink gap-1 overflow-hidden  mobile:text-sm",children:[(0,u.jsx)("span",{className:"max-w-[50%] truncate",children:null!==(l=null==_?void 0:null===(n=_.Game)||void 0===n?void 0:n.HomeTeamName)&&void 0!==l?l:"-"}),(0,u.jsx)("span",{children:"vs"}),(0,u.jsx)("span",{className:"max-w-[50%] truncate",children:null!==(r=null==_?void 0:null===(a=_.Game)||void 0===a?void 0:a.AwayTeamName)&&void 0!==r?r:"-"})]}),!S&&"event"!==p&&(0,u.jsx)(ek.Z,{count:null!==(m=null==_?void 0:null===(i=_.Streamer)||void 0===i?void 0:i.Heat)&&void 0!==m?m:0,className:"mobile:items-end mobile:text-sm",imgSize:S?14:16})]})]}),(0,u.jsxs)("div",{className:"flex items-end justify-end gap-3 mobile:gap-2",children:[v&&(0,u.jsx)(eX,{muted:I,volume:g,className:"mobile:h-8",onChange:(e,t)=>{L({name:o.Volume,value:e,options:{forSession:t}})},onMuted:e=>{L({name:o.Muted,value:e})},onInteractive:()=>{L({name:o.Interactive})}}),R&&!document.pictureInPictureElement&&(0,u.jsx)(eJ,{resolution:C,isWebRTC:D,onChange:e=>{L({name:o.PROTOCOL,value:e})}}),!S&&(0,u.jsx)(eS,{}),!S&&(0,u.jsx)(eB,{streamerId:x,placement:p}),!S&&(0,u.jsx)(eb,{}),(0,u.jsx)(eF,{isFullScreen:T,onChange:L})]})]})},e0=n(77221),e4=e=>{let t=e.className,n=e.children,a=e.isFullscreen,i=e.handleChange,s=(0,P.tv)();return(0,u.jsx)("button",{type:"button",className:t,onClick:()=>{a?i({name:o.Exit_FullScreen}):s.back()},children:null!=n?n:(0,u.jsx)(e0.Z,{size:20,variant:"Outline"})})};function e2(e){let t=e.streamerId,n=e.volume,a=e.muted,i=e.isFullscreen,s=e.isVisible,l=e.handleChange,r=e.isPlay,c=e.bigPlayBtnVisible,m=e.isWebRTC,E=e.resolution,g=e.placement,I=(0,M.f)("mobile"),T=(0,ez.Z)(e=>!!e.token),A=(0,e_.Z)().onTokenChange;(0,d.useEffect)(()=>A(()=>{eR()}),[T]);let x=e=>{switch(e.name){case o.PLAY:case o.PAUSE:ef()}l(e)};return(0,u.jsx)("div",{className:(0,N.Z)("pointer-events-none absolute inset-0 bg-transparent opacity-0 transition-opacity ease-in-out",{"pointer-events-auto bg-gradient-to-b from-neutral-950/75 via-transparent to-transparent opacity-100":s}),children:(0,u.jsxs)("div",{className:"flex aspect-video size-full flex-col justify-between mobile:c-landscape:h-dvh",children:[(0,u.jsxs)("div",{className:"flex gap-4 p-4 text-neutral",children:[I&&(0,u.jsx)(e4,{isFullscreen:i,handleChange:l,className:"size-8"}),I&&(0,u.jsx)(R,{className:"size-8"}),I&&(0,u.jsx)(eb,{className:"size-8"}),(0,u.jsx)("div",{className:"flex-1"}),I&&(0,u.jsx)(eS,{}),(0,u.jsx)(D,{link:`/${"event"===g?"events":"live"}/${t}`,className:"border-transparent bg-transparent text-neutral"})]}),c&&(0,u.jsx)("div",{"data-big-play-btn":!0,className:"absolute left-1/2 top-1/2 translate-x-[-20px] translate-y-[-20px]",children:(0,u.jsx)(U,{active:r,imgSize:40,onChange:e=>x({name:e?o.PLAY:o.PAUSE,value:e}),className:""})}),(0,u.jsx)(eq,{className:(0,N.Z)("opacity-0 transition duration-300 ease-in ",{"opacity-100":s}),muted:a,volume:n,isFullscreen:i,streamerId:t,onChange:x,isPlay:r,videoVisible:c,isWebRTC:m,resolution:E,placement:g})]})})}var e1=n(95266),e3=n(90732),e5=n(15266),e9=n(95740),e6=(0,d.memo)(function(e){let t=e.message,n=e.isMine,a=e.className,i=e.onComplete,s=t.Content,l=t.Id,r=t.UserType,o=(0,d.useRef)(null),c=(0,e5.Z)(l,s.trim().replace(/\r\n|\n/g,""));return(0,e1.V)(()=>{e3.ZP.set(o.current,{x:o.current.parentElement.clientWidth,y:(o.current.clientHeight+10)*Math.floor(3*Math.random())}),e3.ZP.to(o.current,{duration:12,x:-(o.current.parentElement.clientWidth+o.current.clientWidth),ease:"none",onComplete:i})}),(0,u.jsx)("div",{ref:o,className:(0,N.Z)("absolute text-neutral shadow-black text-shadow-bullet",{"text-primary-300":n,"text-[#fcbd31]":r===e9.i4.assistant||r===e9.i4.superAdmin},a),children:(0,u.jsx)("div",{className:"mx-2 max-w-[1280px] overflow-hidden truncate whitespace-nowrap px-1 text-center desktop:text-2xl",children:c})})});e3.ZP.registerPlugin(e1.V);var e8=e=>{let t=e.className,n=(0,d.useRef)(null),a=(0,ez.Z)(e=>e.userId),i=(0,c._)((0,d.useState)([]),2),s=i[0],l=i[1],r=ep().isBulletEnabled,o=(0,d.useRef)({fn:()=>{},id:0});(0,eE.Z)("ReceiveMessage",e=>{n.current&&l(t=>[...t,{message:e,isMine:e.UserId===a,id:e.Id}])});let M=(0,d.useCallback)(e=>{if(!1===e)return document.removeEventListener("visibilitychange",o.current.fn),clearInterval(o.current.id);let t=()=>{clearInterval(o.current.id),document.hidden?(e3.ZP.ticker.lagSmoothing(0),o.current.id=window.setInterval(e3.ZP.ticker.tick,500)):e3.ZP.ticker.lagSmoothing(500,33)};document.addEventListener("visibilitychange",t),o.current.fn=t,t()},[]);return(0,d.useEffect)(()=>(M(!0),()=>{M(!1)}),[]),(0,u.jsx)("div",{className:t,children:(0,u.jsx)("div",{ref:n,className:(0,N.Z)("relative aspect-video h-2/3 w-full overflow-hidden"),children:s.map(e=>(0,u.jsx)(e6,{className:(0,N.Z)({hidden:!r}),message:e.message,isMine:e.isMine,onComplete:()=>{l(t=>{let n=t.findIndex(t=>t.id===e.id);return n>-1&&t.splice(n,1),[...t]})}},e.id))})})};function e7(e){let t=e.isLock,n=e.onChange,a=e.className,i=e.visible,s=(0,M.f)("mobile")?20:40;return(0,u.jsx)("div",{className:(0,N.Z)(" pointer-events-none absolute inset-0 flex items-center bg-transparent opacity-0 transition-opacity ease-in-out",{"opacity-100 ":i}),children:(0,u.jsx)("button",{type:"button",className:(0,N.Z)(" pointer-events-none rounded-full border border-white/30  bg-black/30 p-2 ",{"pointer-events-auto":i},{"border-white/40 bg-black/40":t},a),onClick:e=>{e.stopPropagation(),n()},children:t?(0,u.jsx)(k.default,{src:"data:image/svg+xml;base64,IDxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjAnIGhlaWdodD0nMjAnIHZpZXdCb3g9JzAgMCAyMCAyMCcgZmlsbD0nbm9uZSc+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICBkPSdNMTAuMDAwMSAxNC40NTgzQzEwLjc1MDIgMTQuNDU4MyAxMS4zNTg0IDEzLjg1MDIgMTEuMzU4NCAxMy4xQzExLjM1ODQgMTIuMzQ5OCAxMC43NTAyIDExLjc0MTYgMTAuMDAwMSAxMS43NDE2QzkuMjQ5ODcgMTEuNzQxNiA4LjY0MTcyIDEyLjM0OTggOC42NDE3MiAxMy4xQzguNjQxNzIgMTMuODUwMiA5LjI0OTg3IDE0LjQ1ODMgMTAuMDAwMSAxNC40NTgzWicKICAgICAgICAgICAgZmlsbD0nd2hpdGUnCiAgICAgICAgICAvPgoKICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9J00xNS4yMzMzIDcuOTQxNjlWNi45MDAwMkMxNS4yMzMzIDQuNjUwMDIgMTQuNjkxNiAxLjY2NjY5IDkuOTk5OTYgMS42NjY2OUM1LjMwODI5IDEuNjY2NjkgNC43NjY2MyA0LjY1MDAyIDQuNzY2NjMgNi45MDAwMlY3Ljk0MTY5QzIuNDMzMjkgOC4yMzMzNSAxLjY2NjYzIDkuNDE2NjkgMS42NjY2MyAxMi4zMjVWMTMuODc1QzEuNjY2NjMgMTcuMjkxNyAyLjcwODI5IDE4LjMzMzQgNi4xMjQ5NiAxOC4zMzM0SDEzLjg3NUMxNy4yOTE2IDE4LjMzMzQgMTguMzMzMyAxNy4yOTE3IDE4LjMzMzMgMTMuODc1VjEyLjMyNUMxOC4zMzMzIDkuNDE2NjkgMTcuNTY2NiA4LjIzMzM1IDE1LjIzMzMgNy45NDE2OVpNOS45OTk5NiAxNS42MTY3QzguNjA4MjkgMTUuNjE2NyA3LjQ4MzI5IDE0LjQ4MzQgNy40ODMyOSAxMy4xQzcuNDgzMjkgMTEuNzA4NCA4LjYxNjYzIDEwLjU4MzQgOS45OTk5NiAxMC41ODM0QzExLjM4MzMgMTAuNTgzNCAxMi41MTY2IDExLjcxNjcgMTIuNTE2NiAxMy4xQzEyLjUxNjYgMTQuNDkxNyAxMS4zOTE2IDE1LjYxNjcgOS45OTk5NiAxNS42MTY3Wk02LjEyNDk2IDcuODY2NjlDNi4wNTgyOSA3Ljg2NjY5IDUuOTk5OTYgNy44NjY2OSA1LjkzMzI5IDcuODY2NjlWNi45MDAwMkM1LjkzMzI5IDQuNDU4MzUgNi42MjQ5NiAyLjgzMzM1IDkuOTk5OTYgMi44MzMzNUMxMy4zNzUgMi44MzMzNSAxNC4wNjY2IDQuNDU4MzUgMTQuMDY2NiA2LjkwMDAyVjcuODc1MDJDMTQgNy44NzUwMiAxMy45NDE2IDcuODc1MDIgMTMuODc1IDcuODc1MDJINi4xMjQ5NlY3Ljg2NjY5WicKICAgICAgICAgICAgZmlsbD0nd2hpdGUnCiAgICAgICAgICAvPgogICAgICAgIDwvc3ZnPgo=",alt:"unlock",width:s,height:s}):(0,u.jsx)(k.default,{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyMCcgaGVpZ2h0PScyMCcgdmlld0JveD0nMCAwIDIwIDIwJyBmaWxsPSdub25lJz4KICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9J00xNC4xNjY2IDE4Ljk1ODNINS44MzMyOUMyLjE1ODI5IDE4Ljk1ODMgMS4wNDE2MyAxNy44NDE2IDEuMDQxNjMgMTQuMTY2NlYxMi41QzEuMDQxNjMgOC44MjQ5OCAyLjE1ODI5IDcuNzA4MzEgNS44MzMyOSA3LjcwODMxSDE0LjE2NjZDMTcuODQxNiA3LjcwODMxIDE4Ljk1ODMgOC44MjQ5OCAxOC45NTgzIDEyLjVWMTQuMTY2NkMxOC45NTgzIDE3Ljg0MTYgMTcuODQxNiAxOC45NTgzIDE0LjE2NjYgMTguOTU4M1pNNS44MzMyOSA4Ljk1ODMxQzIuODQ5OTYgOC45NTgzMSAyLjI5MTYzIDkuNTI0OTggMi4yOTE2MyAxMi41VjE0LjE2NjZDMi4yOTE2MyAxNy4xNDE2IDIuODQ5OTYgMTcuNzA4MyA1LjgzMzI5IDE3LjcwODNIMTQuMTY2NkMxNy4xNSAxNy43MDgzIDE3LjcwODMgMTcuMTQxNiAxNy43MDgzIDE0LjE2NjZWMTIuNUMxNy43MDgzIDkuNTI0OTggMTcuMTUgOC45NTgzMSAxNC4xNjY2IDguOTU4MzFINS44MzMyOVonCiAgICAgICAgICAgIGZpbGw9J3doaXRlJwogICAgICAgICAgLz4KCiAgICAgICAgICA8cGF0aAogICAgICAgICAgICBkPSdNNSA4Ljk1ODM1QzQuNjU4MzMgOC45NTgzNSA0LjM3NSA4LjY3NTAyIDQuMzc1IDguMzMzMzVWNi42NjY2OUM0LjM3NSA0LjI1MDAyIDQuOTU4MzMgMS4wNDE2OSAxMCAxLjA0MTY5QzEzLjczMzMgMS4wNDE2OSAxNS42MjUgMi42NTAwMiAxNS42MjUgNS44MzMzNUMxNS42MjUgNi4xNzUwMiAxNS4zNDE3IDYuNDU4MzUgMTUgNi40NTgzNUMxNC42NTgzIDYuNDU4MzUgMTQuMzc1IDYuMTc1MDIgMTQuMzc1IDUuODMzMzVDMTQuMzc1IDQuMTgzMzUgMTMuODc1IDIuMjkxNjkgMTAgMi4yOTE2OUM2LjM2NjY3IDIuMjkxNjkgNS42MjUgNC4wNDE2OSA1LjYyNSA2LjY2NjY5VjguMzMzMzVDNS42MjUgOC42NzUwMiA1LjM0MTY3IDguOTU4MzUgNSA4Ljk1ODM1WicKICAgICAgICAgICAgZmlsbD0nd2hpdGUnCiAgICAgICAgICAvPgoKICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgIGQ9J005Ljk5OTk2IDE2LjA0MTdDOC41MDgyOSAxNi4wNDE3IDcuMjkxNjMgMTQuODI1IDcuMjkxNjMgMTMuMzMzM0M3LjI5MTYzIDExLjg0MTcgOC41MDgyOSAxMC42MjUgOS45OTk5NiAxMC42MjVDMTEuNDkxNiAxMC42MjUgMTIuNzA4MyAxMS44NDE3IDEyLjcwODMgMTMuMzMzM0MxMi43MDgzIDE0LjgyNSAxMS40OTE2IDE2LjA0MTcgOS45OTk5NiAxNi4wNDE3Wk05Ljk5OTk2IDExLjg3NUM5LjE5OTk2IDExLjg3NSA4LjU0MTYzIDEyLjUzMzMgOC41NDE2MyAxMy4zMzMzQzguNTQxNjMgMTQuMTMzMyA5LjE5OTk2IDE0Ljc5MTcgOS45OTk5NiAxNC43OTE3QzEwLjggMTQuNzkxNyAxMS40NTgzIDE0LjEzMzMgMTEuNDU4MyAxMy4zMzMzQzExLjQ1ODMgMTIuNTMzMyAxMC44IDExLjg3NSA5Ljk5OTk2IDExLjg3NVonCiAgICAgICAgICAgIGZpbGw9J3doaXRlJwogICAgICAgICAgLz4KPC9zdmc+Cg==",alt:"lock",width:s,height:s})})})}var te=n(92406);function tt(){let e=(0,M.Z)();return(0,u.jsx)(te.default,{src:`/assets/preview-screen/${e}_not_allowed.png`,alt:"not allowed",fill:!0,quality:100,className:"object-cover"})}function tn(e){let t=e.className,n=e.imgSize,a=void 0===n?36:n,i=e.onChange;return(0,u.jsx)("div",{className:(0,N.Z)("flex cursor-pointer items-center gap-0.5 font-roboto",t),onClick:e=>{e.stopPropagation(),null==i||i()},children:(0,u.jsx)(k.default,{className:"aspect-square",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDE2MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUyIDgwQzE1MiAxMTkuNzY1IDExOS43NjUgMTUyIDgwIDE1MkM0MC4yMzU1IDE1MiA4IDExOS43NjUgOCA4MEM4IDQwLjIzNTUgNDAuMjM1NSA4IDgwIDhDMTE5Ljc2NSA4IDE1MiA0MC4yMzU1IDE1MiA4MFpNMTYwIDgwQzE2MCAxMjQuMTgzIDEyNC4xODMgMTYwIDgwIDE2MEMzNS44MTcyIDE2MCAwIDEyNC4xODMgMCA4MEMwIDM1LjgxNzIgMzUuODE3MiAwIDgwIDBDMTI0LjE4MyAwIDE2MCAzNS44MTcyIDE2MCA4MFpNMTE0LjY2NyA4NC42MTg5QzExOC4yMjIgODIuNTY2MSAxMTguMjIyIDc3LjQzNDEgMTE0LjY2NyA3NS4zODEzTDY2LjY2NjcgNDcuNjY4NEM2My4xMTExIDQ1LjYxNTcgNTguNjY2NyA0OC4xODE2IDU4LjY2NjcgNTIuMjg3Mkw1OC42NjY3IDEwNy43MTNDNTguNjY2NyAxMTEuODE4IDYzLjExMTEgMTE0LjM4NCA2Ni42NjY3IDExMi4zMzJMMTE0LjY2NyA4NC42MTg5WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",alt:"not allowed play icon",width:a,height:a})})}var ta=n(31301),ti=(0,d.memo)(e=>{var t;let n=e.streamerId,a=e.placement,i=e.infoVisible,s=(0,d.useRef)(null);(0,p._)((0,ta.Y)());let l=(0,e_.Z)(),r=l.token,E=l.onTokenChange,g=(0,c._)((0,d.useState)("liveroom"===a&&!!r),2),I=g[0],T=g[1],x=(0,es.xH)(),j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"liveroom",t=arguments.length>1?arguments[1]:void 0,n=(0,H.useQuery)({queryKey:["/Live/GetAudienceCSSSetting",t,e],queryFn:()=>"event"===e?V(t):Z(t),refetchOnWindowFocus:!1}),a=n.data,i=n.refetch,s=n.isLoading,l=(0,d.useMemo)(()=>{if(a){var e,t;a.SdkAppId;let n=a.RoomId,i=(a.StreamerId,a.UserId,a.UserSig,a.PrivateMapKey,a.Token),s=(a.LicenseUrl,a.TxSecret),l=a.TxTime,r=a.Server,o=a.CSSecreates,c=B&&(null==o?void 0:null===(e=o.find(e=>"webRtc"===e.Type))||void 0===e?void 0:e.TxSecret)||s,u=B&&(null==o?void 0:null===(t=o.find(e=>"hls"===e.Type))||void 0===t?void 0:t.TxSecret)||s,d=B?`${n}_RBS`:n;return{webRTCUrl:`${r}${n}?txSecret=${c}&txTime=${l}&token=${i}`,hlsUrl:`${null==r?void 0:r.replace("webrtc:","https:")}${d}.m3u8?txSecret=${u}&txTime=${l}`}}return{webRTCUrl:"",hlsUrl:""}},[a]);return(0,S._)({isOnAir:!!a||"event"===e,reload:i,isLoading:s},l)}(a,n),v=j.isOnAir,D=j.webRTCUrl,C=j.hlsUrl,O=j.reload,P=j.isLoading,f=(0,y.Z)(n,"event"===a),k=f.data;f.isFetched;let Y=(0,c._)((0,d.useState)(!0),2),Q=Y[0],W=Y[1],G=(0,c._)((0,d.useState)(v),2),J=G[0],K=G[1],$=(0,z.usePathname)().replaceAll("/",""),X=["","home"].some(e=>e===$),q=(0,c._)((0,m.Xs)(X?"livehome":$,{sessionVolume:1,volumeBeforeChange:1,muted:!1,sessionKey:$}),2),ee=q[0],et=q[1],el=(0,c._)((0,d.useState)(ee.sessionVolume),2),er=el[0],eM=el[1],em=(0,c._)((0,d.useState)(ee.muted),2),eE=em[0],eg=em[1],eI=(0,c._)((0,d.useState)(!1),2),eT=eI[0],eA=eI[1],ex=(0,c._)((0,d.useState)(!1),2),ej=ex[0],ev=ex[1],eD=(0,c._)((0,d.useState)(!1),2),ey=eD[0],eC=eD[1],ep=(0,c._)((0,d.useState)(NaN),2),eS=ep[0],ez=ep[1],eh=(0,es.ZP)(),eO=eh.signInModalOpened,eP=eh.toggleFullscreen,eR=eh.setFirstTimeEnteringLiveRoom,ef=eh.firstTimeEnteringLiveRoom,ew=eh.toggleSignInModal,eb=eh.pauseStreaming,ek=(0,ei.Z)(),eU=(0,c._)((0,d.useState)(()=>i),2),eY=eU[0],eZ=eU[1],eQ=(0,c._)((0,d.useState)(!1),2),eV=eQ[0],eW=eQ[1],eG=(0,c._)((0,d.useState)("SD"),2),eH=eG[0],eF=eG[1],eJ=(0,c._)((0,d.useState)(!1),2),eK=eJ[0],e$=eJ[1],eX=(0,M.f)("mobile"),eq=(0,c._)((0,d.useState)(!1),2),e0=eq[0],e4=eq[1],e1="ios"===(0,eo.Z)().device.current,e3=eL({streamerId:n,placement:a,getPlayerRef:()=>ts.current,onStreamConnect:()=>{O(),ez(NaN)},onStreamDisconnect:()=>{W(!0),ez(en.AZ.PLAY_ERR_NO_PUBLISH)},onStreamerOnLive:e=>{if(e)O();else{var t;W(!0),null===(t=ts.current)||void 0===t||t.removePlayerListener()}}}).cancelConnectDelay,e5=(0,L.useTranslations)();(0,d.useEffect)(()=>es.ZP.subscribe(e=>e.isIpForbidden,(e,t)=>{t&&O()}),[]),(0,d.useEffect)(()=>{let e=function(e){let t=()=>{e(ec.Z.isFullscreen)};return ec.Z.isEnabled&&ec.Z.on("change",t),t}(e=>{eA(e),eP(e),eW(e),e||eZ(!0)});return()=>{ec.Z.isEnabled&&ec.Z.off("change",e)}},[eP]);let e9=e=>{e.className="*:tz-1 bg-black fixed transform-gpu mobile:fullscreen-rotate-90 h-[100dvw] w-[100dvh] standalone:pwa-fullscreen-w overflow-hidden z-90 "},e6=e=>{e.className=""},te=(0,d.useRef)({paused:!1}),ti=(0,d.useCallback)(e=>{if(e.name===o.FullScreen&&(s.current&&(function(e){return eu.apply(this,arguments)})(s.current).then(e=>{e||(e9(s.current),ev(!0),eA(!0),eP(!0)),screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape").catch(e=>{console.log("screen.orientation.lock() not support this device.")})}),eW(!0)),e.name===o.Exit_FullScreen&&((function(){return ed.apply(this,arguments)})().then(e=>{e||(e6(s.current),eA(!1),eP(!1),ev(!1))}),eW(!1),eZ(!0)),e.name===o.Volume){let t=e.value,n=e.options;en.ZP.videoElement.volume=t,en.ZP.videoElement.muted=0===t,(null==n?void 0:n.forSession)&&et(e=>(0,_._)((0,S._)({},e),{sessionVolume:t,volumeBeforeChange:0!==t?t:e.volumeBeforeChange,muted:0===t}))}if(e.name===o.Muted){let t=e.value;en.ZP.videoElement.muted=t,t||0!==en.ZP.videoElement.volume?et(e=>(0,_._)((0,S._)({},e),{muted:t})):(en.ZP.videoElement.volume=ee.volumeBeforeChange,et(e=>(0,_._)((0,S._)({},e),{sessionVolume:ee.volumeBeforeChange,muted:t})))}if(e.name===o.PAUSE){let t=e.options;en.ZP.videoElement.pause(),eC(!1),t||(te.current.paused=en.ZP.videoElement.paused)}e.name===o.PLAY&&(J?en.ZP.videoElement.play().then(()=>{te.current.paused=en.ZP.videoElement.paused}):O(),eC(!0)),e.name===o.RESUME&&en.ZP.videoElement.play().then(()=>{e$(!1),te.current.paused=en.ZP.videoElement.paused}).catch(e=>{O()}),e.name===o.PROTOCOL&&T(e.value)},[J,ee]);(0,d.useEffect)(()=>{"landscape"===ek&&ej?s.current&&(e6(s.current),s.current.className="*:tz-1 bg-black fixed  h-screen w-screen overflow-hidden z-90"):"portrait"===ek&&ej&&s.current&&e9(s.current)},[ek,ej,eT]),(0,d.useEffect)(()=>{eO&&eb&&(ti({name:o.PAUSE}),ti({name:o.Exit_FullScreen}))},[eO]);let ts=(0,d.useRef)(null);(0,d.useEffect)(()=>{if(e1)return()=>{};let e=()=>{document.pictureInPictureElement||(document.hidden?en.ZP.videoElement.paused||ti({name:o.PAUSE,options:!0}):window.setTimeout(()=>{te.current.paused||ti({name:o.RESUME}),setTimeout(()=>{te.current.paused||ti({name:o.RESUME})},700)},300))};return eX&&window.addEventListener("visibilitychange",e),()=>{eX&&window.removeEventListener("visibilitychange",e)}},[eX]),(0,d.useEffect)(()=>{if(!X&&!Q)return ef&&!r&&ew(!0,!1),()=>{eR(!1)}},[Q]),(0,d.useEffect)(()=>{var e;return E((e=(0,A._)(function*(e){let t=(yield en.ZP.getSupported()).webrtcSupported;ti({name:o.PROTOCOL,value:e&&t})}),function(t){return e.apply(this,arguments)}))},[]);let tl=(0,d.useCallback)(e=>{ez(e)},[]),tr=(0,c._)((0,d.useState)(!1),2),to=tr[0],tc=tr[1],tu=(0,c._)((0,d.useState)(!1),2),td=tu[0],tM=tu[1];return(0,u.jsx)("div",{ref:s,children:x?(0,u.jsxs)("div",{className:"z-20 flex aspect-video w-full flex-col gap-6 bg-black flex-center desktop:rounded",children:[(0,u.jsx)("div",{className:(0,N.Z)("pointer-events-none absolute inset-0 bg-transparent opacity-0 transition-opacity ease-in-out",{"pointer-events-auto bg-gradient-to-b from-neutral-950/75 via-transparent to-transparent opacity-100":i&&eY&&!eK}),children:(0,u.jsx)("div",{className:"flex aspect-video size-full flex-col justify-between mobile:c-landscape:h-dvh",children:(0,u.jsxs)("div",{className:"flex gap-4 p-4 text-neutral",children:[eX&&(0,u.jsx)(h.default,{className:"size-8 "}),eX&&(0,u.jsx)(R,{className:"size-8 "})]})})}),(0,u.jsx)("h3",{className:"text-center text-base font-normal text-white font-title",children:e5("LIVE.LOGIN_TO_WATCH")}),(0,u.jsx)("button",{type:"button",className:"btn btn-link btn-sm z-30 text-neutral-50",onClick:()=>{ew(!0)},children:e5("LIVE.CLICK_TO_LOGIN")})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:(0,N.Z)("relative flex h-full items-center",{hidden:Q||!v}),children:(0,u.jsx)(eN,{ref:ts,isWebRTC:I,sourceUrl:I?D:C,sessionVol:ee,streamerNickName:null==k?void 0:null===(t=k.Streamer)||void 0===t?void 0:t.NickName,refetchLiveAudience:O,onVolume:(e,t)=>{eg(e),eM(t)},onStatusChange:e=>{e&&tc(!1),e&&tM(!1),W(!e),eC(e)},onLoad:()=>{K(!1),e3()},onLoaded:()=>{K(!0),e$(!1)},changeProtocol:e=>{ti({name:o.PROTOCOL,value:e})},changeResolution:e=>{eF(e)},onBlocked:()=>{e4(!0),et(e=>(0,_._)((0,S._)({},e),{muted:!0})),tM(!0),e$(!0)},onErrorHandler:tl,onLoadingHard:()=>{tc(!0)}})}),(J||!P&&Q)&&(0,u.jsx)(ea,{type:F.LEB,refetchLiveAudience:O,isFetchingLiveAudience:P,streamerId:n,isStreaming:!Q,isOnAir:v,resumeVisible:eK,handleChange:ti,errorCode:eS,placement:a}),(0,u.jsx)(e8,{className:"absolute inset-0"}),(0,u.jsx)(e2,{streamerId:n,isVisible:i&&eY&&!eK,volume:er,muted:eE,isFullscreen:eT,handleChange:ti,isPlay:ey,isWebRTC:!!I,bigPlayBtnVisible:!Q&&v&&i&&eY,resolution:eH,placement:a}),(0,u.jsx)(e7,{className:"ml-20 mobile:ml-12 mobile:c-landscape:ml-16 ",visible:i&&eV,isLock:!eY,onChange:()=>{eV?eZ(!eY):eZ(!0)}}),eX&&(0,u.jsx)(eB,{className:(0,N.Z)("absolute right-5 top-1/2 -translate-y-1/2",{invisible:document.pictureInPictureElement||!i||!eY||eK}),streamerId:n,placement:a}),v&&(Q||P)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"pointer-events-none absolute inset-0 ",children:(0,u.jsx)(b.Z,{className:"flex aspect-video w-full flex-col items-center justify-center"})}),(0,u.jsx)("div",{className:"pointer-events-none absolute inset-0 top-2/3 w-full text-center text-neutral-50 ",children:to&&e5("LIVE.VIDEO_LOADING")})]}),eK&&(0,u.jsx)("div",{className:"absolute inset-0 z-100 flex items-center justify-center",children:(0,u.jsx)(U,{active:!1,imgSize:40,onChange:()=>{ti({name:o.RESUME})}})}),td&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"absolute inset-0 z-100 flex items-center justify-center",children:(0,u.jsx)(tt,{})}),(0,u.jsx)("div",{className:"absolute inset-0 z-100 flex items-center justify-center",children:(0,u.jsxs)("div",{className:(0,N.Z)("mt-12 flex flex-col flex-center",eX?"gap-4":"gap-14"),children:[(0,u.jsx)(tn,{imgSize:eX?100:160,onChange:()=>{ti({name:o.RESUME})}}),(0,u.jsx)("div",{className:(0,N.Z)(" font-bold text-white",eX?" text-base":"text-2xl"),children:e5("LIVE.CLICK_PLAY_TO_WATCH")})]})})]}),!Q&&e0&&(0,u.jsx)("div",{className:"pointer-events-none absolute inset-0 ",children:(0,u.jsx)(w,{className:"flex aspect-video w-full items-end justify-center pb-20 mobile:pb-16",onClick:()=>{ti({name:o.Muted,value:!1}),e4(!1)}})})]})})});function ts(e){let t=e.placement,n=e.streamerId,a=e.className,i=e.children,s=(0,M.f)("mobile"),l=(0,d.useRef)(null),r=function(e){let t=(0,M.f)("mobile"),n=(0,c._)((0,d.useState)(()=>Date.now()),2),a=n[0],i=n[1];(0,m.t$)(e,e=>{let t=e.target;t&&t.id&&t.id.includes("cast_caf")||i(0)});let s=(0,d.useMemo)(()=>[()=>{t||i(Date.now())},()=>{i(e=>{let t=Date.now();return t-e>5e3?t:0})},()=>{t||i(0)}],[t]);return(0,d.useEffect)(()=>{let e;return a>0&&(e=window.setTimeout(()=>{i(0)},5e3)),()=>{e&&window.clearTimeout(e)}},[a]),{infoVisible:(0,d.useMemo)(()=>a+5e3>Date.now(),[a]),handlerlist:s}}(l),o=r.infoVisible,E=(0,c._)(r.handlerlist,3),g=E[0],I=E[1],T=E[2];return(0,u.jsxs)("div",{ref:l,onClick:()=>{I()},onMouseMove:()=>{g()},onMouseLeave:()=>{T()},className:(0,N.Z)("relative aspect-video bg-neutral-950",a),children:[(0,d.createElement)(ti,{streamerId:n,placement:t,infoVisible:o}),s&&"event"!==t&&(0,u.jsx)("div",{"data-active":o,className:(0,N.Z)("collapse absolute inset-x-0 top-full z-20 h-12 w-full origin-top scale-y-0 rounded-b-lg rounded-t-none border-b border-metal-200 bg-neutral transition-transform ease-in-out",{"scale-y-100":o}),children:(0,u.jsx)(C,{streamerId:n},`${n}-fav`)}),i]})}},17818:function(e,t,n){"use strict";n.d(t,{AZ:function(){return r},EO:function(){return l},Op:function(){return d},ZP:function(){return M},s8:function(){return o}});var a,i,s,l,r,o,c=n(96266),u=n(85569);class d extends CustomEvent{constructor(e,t){super(e,{detail:t})}}d.WEBRTC_EVENT="webrtcevent",d.WEBRTC_STATS="webrtcstats",d.WEBRTC_SEI="webrtcsei",d.RS_ERROR="rserror",(a=l||(l={}))[a.PLAY_EVT_STREAM_BEGIN=1001]="PLAY_EVT_STREAM_BEGIN",a[a.PLAY_EVT_SERVER_CONNECTED=1002]="PLAY_EVT_SERVER_CONNECTED",a[a.PLAY_EVT_PLAY_BEGIN=1003]="PLAY_EVT_PLAY_BEGIN",a[a.PLAY_EVT_PLAY_STOP=1004]="PLAY_EVT_PLAY_STOP",a[a.PLAY_EVT_SERVER_RECONNECT=1005]="PLAY_EVT_SERVER_RECONNECT",a[a.PLAY_EVT_STREAM_EMPTY=1006]="PLAY_EVT_STREAM_EMPTY",a[a.PLAY_EVT_REQUEST_PULL_BEGIN=1007]="PLAY_EVT_REQUEST_PULL_BEGIN",a[a.PLAY_EVT_REQUEST_PULL_SUCCESS=1008]="PLAY_EVT_REQUEST_PULL_SUCCESS",a[a.PLAY_EVT_PLAY_WAITING_BEGIN=1009]="PLAY_EVT_PLAY_WAITING_BEGIN",a[a.PLAY_EVT_PLAY_WAITING_STOP=1010]="PLAY_EVT_PLAY_WAITING_STOP",a[a.PLAY_EVT_P2P_START_SUCCESS=3001]="PLAY_EVT_P2P_START_SUCCESS",a[a.PLAY_EVT_P2P_SOURCE_SWITCH=3002]="PLAY_EVT_P2P_SOURCE_SWITCH",(i=r||(r={}))[i.PLAY_ERR_WEBRTC_FAIL=-2001]="PLAY_ERR_WEBRTC_FAIL",i[i.PLAY_ERR_REQUEST_PULL_FAIL=-2002]="PLAY_ERR_REQUEST_PULL_FAIL",i[i.PLAY_ERR_PLAY_FAIL=-2003]="PLAY_ERR_PLAY_FAIL",i[i.PLAY_ERR_SERVER_DISCONNECT=-2004]="PLAY_ERR_SERVER_DISCONNECT",i[i.PLAY_ERR_DECODE_FAIL=-2005]="PLAY_ERR_DECODE_FAIL",i[i.PLAY_ERR_REQUEST_ABR_FAIL=-2006]="PLAY_ERR_REQUEST_ABR_FAIL",i[i.PLAY_WEBRTC_ATTEMPT_TIMEOUT=-2009]="PLAY_WEBRTC_ATTEMPT_TIMEOUT",i[i.PLAY_ERR_P2P_START_FAIL=-4001]="PLAY_ERR_P2P_START_FAIL",i[i.PLAY_ERR_HLS_NETWORK=-5e3]="PLAY_ERR_HLS_NETWORK",i[i.PLAY_ERR_HLS_MEDIA_FAIL=-5001]="PLAY_ERR_HLS_MEDIA_FAIL",i[i.PLAY_ERR_HLS_GENERAL=-5002]="PLAY_ERR_HLS_GENERAL",i[i.PLAY_ERR_HLS_NOT_SUPPORT=-5003]="PLAY_ERR_HLS_NOT_SUPPORT",i[i.PLAY_HLS_ATTEMPT_TIMEOUT=-5004]="PLAY_HLS_ATTEMPT_TIMEOUT",i[i.PLAY_ERR_NO_PUBLISH=-9997]="PLAY_ERR_NO_PUBLISH",i[i.PLAY_ERR_NOT_ALLOWED=-9998]="PLAY_ERR_NOT_ALLOWED",i[i.PLAY_ERR_GENERAL=-9999]="PLAY_ERR_GENERAL",(s=o||(o={}))[s.UNKNOWN=0]="UNKNOWN",s[s.BEST=1]="BEST",s[s.FINE=2]="FINE",s[s.NORMAL=3]="NORMAL",s[s.BAD=4]="BAD",s[s.POOR=5]="POOR";class M{static setSourceUrl(e){M.sourceUrl=e}static getSourceUrl(){return M.sourceUrl}static switchWebRTC(e){var t;null===(t=M.WEBRTC_PLAYER)||void 0===t||t.switchStream(e)}static getCurrentProtocolType(){return M.currentProtocolType}static getSupported(){return new Promise(e=>{TXLivePlayer.checkSupport(t=>{e({hlsSupported:u.ZP.isSupported(),webrtcSupported:t.support,h264Supported:t.h264Support})})})}static setAttribute(e){return e.id="leb-player",e.setAttribute("preload","auto"),e.setAttribute("class","w-full h-full object-contain rs-video"),e.playsInline=!0,e.controls=!1,e.setAttribute("webkit-playsinline","true"),e}static get videoElement(){return M.VIDEO_INSTANCE=M.VIDEO_INSTANCE||(()=>{let e=document.createElement("video");return M.setAttribute(e)})(),M.VIDEO_INSTANCE}static videoErrorHandle(e,t){if(null==t?void 0:t.fatal){switch(t.type){case u.ZP.ErrorTypes.NETWORK_ERROR:M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5e3,data:{message:"HLS network error encountered."}}));break;case u.ZP.ErrorTypes.MEDIA_ERROR:M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5001,data:{message:"HLS media error encountered."}}));break;default:M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5002,data:{message:"HLS fatal error encountered."}}))}return}let n=null==e?void 0:e.error;if(n)switch(n.code){case MediaError.MEDIA_ERR_NETWORK:M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5e3,data:{message:"HLS network error encountered."}}));break;case MediaError.MEDIA_ERR_DECODE:M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5001,data:{message:"HLS media error encountered."}}));break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5e3,data:{message:"HLS network error encountered."}}));break;default:console.error("hls unknown error")}}static mountVideo(e){e.replaceChildren(M.videoElement)}static addVideo(e,t,n,a){return M.setSourceUrl(t),M.videoInvokePromiseChain=M.videoInvokePromiseChain.then(()=>(0,c._)(function*(){M.currentProtocolType=n,M.videoElement.muted=!1,e.replaceChildren(M.videoElement);try{if("webrtc"===n)M.WEBRTC_PLAYER=M.WEBRTC_PLAYER||new TXLivePlayer,M.WEBRTC_PLAYER.setConfig({signalDomain:{protocol:"https",domain:"webrtc-dk.tliveplay.com",query:!0}}),M.WEBRTC_PLAYER.setControls(!1),M.WEBRTC_PLAYER.setPlayListener({onPlayEvent:(e,t)=>{let n=[-2005,-4001,-2003,-2006,-2002,-2004,-2001].includes(e);M.videoElement.dispatchEvent(new d(n?d.RS_ERROR:d.WEBRTC_EVENT,{code:e,data:t}))},onPlayStats:e=>{M.videoElement.dispatchEvent(new d(d.WEBRTC_STATS,{data:e}))},onPlaySEI:e=>{M.videoElement.dispatchEvent(new d(d.WEBRTC_SEI,{data:e}))}}),M.WEBRTC_PLAYER.setPlayerView(M.videoElement),M.WEBRTC_PLAYER.startPlay(t),yield new Promise((e,t)=>{let n=setTimeout(()=>{M.videoElement.removeEventListener("canplay",a),t("Play attempt time out")},5e3),a=()=>{M.play().finally(()=>{clearTimeout(n),e()}),M.videoElement.removeEventListener("canplay",a)};M.videoElement.addEventListener("canplay",a)});else{let e=()=>{M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-5003,data:{message:"This device not support hls."}}))};a?M.videoElement.canPlayType("application/vnd.apple.mpegurl")?yield M.useNativeHls(t):u.ZP.isSupported()?yield M.useMSEHls(t):e():u.ZP.isSupported()?yield M.useMSEHls(t):M.videoElement.canPlayType("application/vnd.apple.mpegurl")?yield M.useNativeHls(t):e()}}catch(e){M.videoInvokePromiseChain=Promise.resolve(),e+""=="Play attempt time out"?M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:"webrtc"===M.currentProtocolType?-2009:-5004,data:{message:"Play attempt time out"}})):M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-9999,data:{message:e||"Error occurred on player ready"}}))}})()),M.videoInvokePromiseChain}static useNativeHls(e){return(0,c._)(function*(){M.videoElement.src=e,M.videoElement.addEventListener("error",M.videoErrorHandle),yield M.play()})()}static useMSEHls(e){return(0,c._)(function*(){M.HLS=M.HLS||new u.ZP({enableWorker:!0,debug:!1,maxBufferLength:30,maxMaxBufferLength:60,maxBufferSize:6e7,maxBufferHole:.5,highBufferWatchdogPeriod:3,levelLoadingMaxRetry:3,fragLoadingMaxRetry:3,fragLoadingTimeOut:2e4,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,lowLatencyMode:!0,maxStarvationDelay:4}),M.HLS.loadSource(e),M.HLS.attachMedia(M.videoElement),M.HLS.on(u.zW.ERROR,M.videoErrorHandle),yield M.play()})()}static play(){return new Promise((e,t)=>(0,c._)(function*(){let n=0;for(;n<2;){let a=setTimeout(()=>{t("Play attempt time out")},5e3);yield M.videoElement.play().then(()=>{n=2,clearTimeout(a),e()}).catch(e=>{clearTimeout(a),n>0&&t(e),"NotAllowedError"===e.name?(M.videoElement.muted=!0,M.videoElement.dispatchEvent(new d(d.RS_ERROR,{code:-9998,data:{message:"NotAllowedError"}}))):(n=2,t(e)),n++})}})())}static clearVideo(){return M.videoInvokePromiseChain=M.videoInvokePromiseChain.then(()=>(0,c._)(function*(){M.videoElement&&(M.videoElement.paused||M.videoElement.pause(),"webrtc"===M.currentProtocolType&&M.WEBRTC_PLAYER?M.videoElement&&(yield M.WEBRTC_PLAYER.stopPlay().catch(e=>{M.videoInvokePromiseChain=Promise.resolve()})):"hls"===M.currentProtocolType&&(M.HLS&&(M.HLS.off(u.zW.ERROR,M.videoErrorHandle),M.HLS.destroy(),M.HLS=void 0),M.videoElement.removeEventListener("error",M.videoErrorHandle)),M.videoElement.src="")})()),M.videoInvokePromiseChain}}M.videoInvokePromiseChain=Promise.resolve()},31424:function(){}}]);