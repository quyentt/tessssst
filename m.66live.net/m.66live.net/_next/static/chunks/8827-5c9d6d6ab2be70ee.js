(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8827],{91054:function(){},55112:function(e,t,n){"use strict";n.r(t),n.d(t,{EndpointModal:function(){return l}});var r=n(48103),o=n(92471),i=n(41482),s=n(954),a=n(17831);let u=()=>(0,r.jsx)(a.Z,{isOpen:!0,className:"z-[9999]",children:(0,r.jsxs)("div",{className:"flex gap-2 flex-center",children:[(0,r.jsx)("span",{children:"Connection error"}),(0,r.jsx)(i.Z,{variant:"Bold",className:"cursor-pointer text-primary",size:32,onClick:()=>{o.Z.setState({apiEndpoint:""}),window.location.reload()}})]})}),l={root:null,rendered:!1,open(){if(!this.root){let e=document.createDocumentFragment();this.root=(0,s.createRoot)(e)}this.rendered||(this.root.render((0,r.jsx)(u,{})),this.rendered=!0)},close(){var e;null===(e=this.root)||void 0===e||e.unmount(),this.root=null,this.rendered=!1}};t.default=l},98658:function(e,t,n){"use strict";n.r(t),n.d(t,{LoadingMask:function(){return a}});var r=n(48103),o=n(76412),i=n(954);let s=()=>(0,o.createPortal)((0,r.jsx)("div",{id:"test-loading",className:"modal modal-open z-[998] flex-center",children:(0,r.jsx)("span",{className:"loading loading-bars loading-lg text-primary"})}),document.body),a={root:null,rendered:!1,open(){if(!this.root){let e=document.createDocumentFragment();this.root=(0,i.createRoot)(e)}this.rendered||(this.root.render((0,r.jsx)(s,{})),this.rendered=!0)},close(){var e;null===(e=this.root)||void 0===e||e.unmount(),this.root=null,this.rendered=!1}}},17831:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(48103),o=n(12585),i=n(76412),s=n(77254),a=n(29366),u=n(29272);function l(e){let t=e.isOpen,n=e.children,l=e.actions,c=e.onClose,d=e.className,f=e.placement,p=e.cover,h=(0,u.Z)().hydrationDone;return t&&h&&a.Z?(0,i.createPortal)((0,r.jsxs)("dialog",{onClick:e=>{e.stopPropagation()},className:(0,s.Z)("modal modal-open",{"modal-top justify-items-center":"top"===f,"modal-bottom justify-items-center":"bottom"===f}),children:[(0,r.jsxs)("div",{className:"col-start-1 row-start-1 mx-5 flex flex-col items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative rounded-2xl shadow",children:[p,(0,r.jsxs)("div",{className:(0,s.Z)("flex w-full flex-col items-center gap-2 rounded-b-2xl bg-neutral-0 p-6 invisible-scrollbar first:rounded-t-2xl desktop:py-8",d),children:[n,l&&(0,r.jsx)("div",{className:"modal-action mt-2 w-full",children:l})]})]}),c&&(0,r.jsx)("button",{type:"button",className:"rounded-full",onClick:c,children:(0,r.jsx)(o.Z,{size:40,className:"text-white",variant:"Bold"})})]}),(0,r.jsx)("div",{className:"modal-backdrop bg-neutral-800/50",onClick:c})]}),document.body):null}},69045:function(e,t,n){"use strict";var r,o,i,s;n.d(t,{$W:function(){return o},J1:function(){return d},OB:function(){return p},PR:function(){return u},TQ:function(){return g},Vy:function(){return l},Zz:function(){return v},eM:function(){return h},t4:function(){return r},tC:function(){return c},tr:function(){return a},v5:function(){return m},x_:function(){return f}});let a="live-access-token",u="live-keep-alive-token",l="NEXT_LOCALE",c="SID",d="CLOSE_PUNCH_IN",f="STREAM_STORE",p="NOTIFICATION_STORE",h="100vw, (max-width: 768px) 768px, (max-width: 1200px) 1200px, (max-width: 1920px) 1920px",m=["image/png","image/jpeg","image/jpg"],g=!1,v="IS_HISTORY_INIT";(i=r||(r={}))[i.mobile=1]="mobile",i[i.desktop=2]="desktop",(s=o||(o={}))[s.WebDesktop=1]="WebDesktop",s[s.WebMobile=2]="WebMobile",s[s.PWADesktop=3]="PWADesktop",s[s.PWAMobile=4]="PWAMobile"},95740:function(e,t,n){"use strict";var r,o,i,s;n.d(t,{J0:function(){return o},Sq:function(){return a},i4:function(){return r}}),(i=r||(r={}))[i.system=-1]="system",i[i.guest=0]="guest",i[i.streamer=1]="streamer",i[i.assistant=2]="assistant",i[i.member=3]="member",i[i.superAdmin=4]="superAdmin",(s=o||(o={}))[s.unknown=0]="unknown",s[s.active=1]="active",s[s.inactive=2]="inactive",s[s.banned=3]="banned";let a={GoldCoin:1}},29272:function(e,t,n){"use strict";var r=n(69632),o=n(3965);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r._)((0,o.useState)(!1),2),n=t[0],i=t[1],s=(0,r._)((0,o.useState)(!1),2),a=s[0],u=s[1];return(0,o.useEffect)(()=>{i(!0)},[]),(0,o.useEffect)(()=>{u(n&&e)},[n,e]),{hydrationDone:n,readyToRender:a}}},51789:function(e,t,n){"use strict";n.d(t,{ej:function(){return o}}),n(61786);var r=n(87373);(0,r.$)("06f62e00d71226a8debdd67213d253c31e9eb2e8");var o=(0,r.$)("cb47c721d7ea98e985b1a944b95016ec5ceb7c6e");(0,r.$)("55aa97d3c7f60b4757e4b1c49cb73c19d21d5d49"),(0,r.$)("c121caabcf67c427d3e405881904333a3cf2bf22"),(0,r.$)("c1e03feca96b29be873bd27bb7b6387beae94954")},99180:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(29366),o=n(28070);function i(e){var t,n,i;return r.Z&&void 0!==window.__ENV?null!==(n=null!==(t=o.env[e])&&void 0!==t?t:window.__ENV[e])&&void 0!==n?n:"":null!==(i=o.env[e])&&void 0!==i?i:""}},82931:function(e,t,n){"use strict";n(61786);var r=n(87373);t.Z=(0,r.$)("3cf775fcdf88668c13f1bbe5056b06f8c720672d")},96473:function(e,t,n){"use strict";n.d(t,{al:function(){return s},e1:function(){return o},k1:function(){return i}});let r=(0,n(99180).Z)("SERVE_LOCALES").split(",").map(e=>e.trim().toLowerCase()),o=r.reduce((e,t)=>{let n="";switch(t){case"zh-tw":n="繁體中文";break;case"zh-cn":n="简体中文";break;case"en-us":n="English";break;case"vi-vn":n="Tiếng Việt";break;case"th-th":n="ภาษาไทย"}return e[t]=n,e},{}),i=r,s=i[0]},26204:function(e,t,n){"use strict";var r,o=n(96266),i=n(99180);let s=()=>{let e=(0,i.Z)("DEPLOY_ENV");return"prod"===e?(0,i.Z)("SERVE_COUNTRY").toLowerCase():e.toLowerCase()},a=()=>(0,i.Z)("DYNAMIC_CONFIG"),u=(r=(0,o._)(function*(){let e=s(),t=a();try{let e=yield fetch(t);return yield e.json()}catch(t){throw console.error(`[Dynamic Config] ${e} error:`,t),t}}),function(){return r.apply(this,arguments)});t.Z=u},70472:function(e,t,n){"use strict";n.d(t,{jD:function(){return u},rU:function(){return s},tv:function(){return l},uX:function(){return a}});var r=n(13694),o=n(96473),i=(0,r.iV)({locales:o.k1,localePrefix:"never"});let s=i.Link,a=i.redirect,u=i.usePathname,l=i.useRouter},84988:function(e,t,n){"use strict";n.d(t,{b:function(){return l}});var r,o=n(96266),i=n(75175),s=n(69045),a=n(29366),u=n(51789);let l=(r=(0,o._)(function*(){return a.Z?i.Z.get(s.tC)||"":(yield(0,u.ej)(s.tC))||""}),function(){return r.apply(this,arguments)})},62740:function(e,t,n){"use strict";let r;n.d(t,{Z:function(){return F}});var o,i=n(96266),s=n(22317),a=n(75175),u=n(35081),l=n(90227),c=n(92987),d=n(69045),f=n(70472),p=n(68503),h=n(15438),m=n(29366),g=n(33454),v=n(92674),Z=n(82931),b=n(30762),y=n(98658),x=n(26204),k=n(92471),S=n(99180),_=n(55112);let E="[Lookup Api Endpoint]",I=new Promise(e=>r=e),N=e=>!!e&&["qNtHat3lT87I33Z7","0Cp3g12rrUqst5kh","TxH5L4bpgIGYpFnE","UoWAQmdvtlAvq7P0","5yMI78vz05AgRxEM"].indexOf(e)>-1,R=e=>"object"==typeof e&&"IsSuccess"in e;var w={loading:!1,start(){return(0,i._)(function*(){if(this.loading)return I;console.info("[Lookup Api Endpoint] start"),this.loading=!0,I=new Promise(e=>r=e);try{let e=yield(0,x.Z)();console.info(E,"get endpoints:",e.apiEndpoints);let t=e.apiEndpoints.map(e=>fetch(`${e}/api/system/gethealth`,{method:"GET",cache:"no-cache"}).then(e=>{let t=e.headers.get("x-inpasu");return N(t)?e.json():Promise.reject()}).then(t=>R(t)?Promise.resolve(e):Promise.reject()).catch(()=>Promise.reject()));return Promise.any(t).then(e=>{console.info(E,"fast endpoint:",e);let t=new URL(e).origin;this.loading=!1,r(t),k.Z.setState({apiEndpoint:t})}).catch(()=>{console.error(E,"No endpoint can use.");let e=(0,S.Z)("API_HOST");r(e),y.LoadingMask.close(),_.EndpointModal.open()}).finally(()=>{this.loading=!1}),I}catch(t){console.error(E,"error:",t);let e=(0,S.Z)("API_HOST");return this.loading=!1,r(e),I}}).apply(this)}},O=n(77696),T=n(85417),j=n.n(T),C=n(51789),P=n(96473),L=n(84988);let A=(0,S.Z)("API_HOST_INTERNAL")||"",M=!A||m.Z?(0,S.Z)("API_HOST"):A;var F=(0,u.Z)(M,{cache:"default"}).addon(l.Z).addon(c.Z).accept("text/plain").middlewares([e=>{var t;return t=(0,i._)(function*(t,n){if(m.Z)try{let r=t,o=new URL(t),i=o.origin,s=o.pathname,a=o.search,u=k.Z.getState().apiEndpoint;u&&u!==i&&(r=(0,O.Z)(u,s,a));let l=yield e(r,n),c=l.headers.get("X-Inpasu"),d=l.clone(),f=yield d.json(),p=N(c);if(R(f)&&p)return l;throw Error()}catch(l){let r=setTimeout(()=>{y.LoadingMask.open()},500),o=yield w.start();y.LoadingMask.close(),clearTimeout(r);let i=new URL(t),s=i.pathname,a=i.search,u=(0,O.Z)(o,s,a);return h.Z.getState().show({type:"info",message:'t("NORMAL.CHANGE_CONNECTION")'}),e(u,n)}return e(t,n)}),function(e,n){return t.apply(this,arguments)}},e=>{var t;return t=(0,i._)(function*(t,n){let r="";if(m.Z)r=b.Z.getState().token||"";else{let e=yield(0,Z.Z)();e&&(r=e.token||"")}r&&(n.headers=(0,v._)((0,g._)({},n.headers),{Token:r}),m.Z&&(0,p.Rf)());let o=yield e(t,n);if(m.Z){let e=o.clone();e.status>=200&&e.status<300&&"800001"===(yield e.json()).Message&&(0,p.ed)()}return(o.headers.has("x-token-expired")||403===o.status)&&(m.Z?p.ZP.getState().setShouldSignOut(!0):a.Z.remove(d.tr)),o}),function(e,n){return t.apply(this,arguments)}},e=>{var t;return t=(0,i._)(function*(t,n){let r;return r=m.Z?a.Z.get(d.Vy):yield(0,C.ej)(d.Vy),n.headers=(0,v._)((0,g._)({},n.headers),{"X-Lang":r||P.al}),e(t,n)}),function(e,n){return t.apply(this,arguments)}},e=>{var t;return t=(0,i._)(function*(t,n){let r=yield(0,L.b)();return n.headers=(0,v._)((0,g._)({},n.headers),{"x-client-id":r}),e(t,n)}),function(e,n){return t.apply(this,arguments)}},e=>{var t;return t=(0,i._)(function*(t,n){if(d.TQ){let e=yield(0,L.b)();console.info(`[Trace] client id: ${e}, request url: ${t}`)}return e(t,n)}),function(e,n){return t.apply(this,arguments)}},e=>{var t;return t=(0,i._)(function*(t,n){let r,o;if(m.Z)r=b.Z.getState().token||"",o=a.Z.get(d.Vy);else{let e=yield(0,Z.Z)();r=(null==e?void 0:e.token)||"",o=yield(0,C.ej)(d.Vy)}let i={token:r,locale:o},s=j()(JSON.stringify(i)).toString();return n.headers=(0,v._)((0,g._)({},n.headers),{"X-Hash":s}),e(t,n)}),function(e,n){return t.apply(this,arguments)}}]).catcher(401,e=>{if(m.Z)return console.error("auth error",e),p.ZP.getState().setShouldSignOut(!0),p.ZP.getState().toggleSignInModal(!0),!1;a.Z.remove(d.tr),(0,f.uX)("/home")}).catcherFallback((o=(0,i._)(function*(e){if(console.error("[Wretch] fallback error:",e),m.Z){let t="";t=e.status?`[${e.status}] ${e.message}`:(yield(0,s.Z)())?'t("ERROR.600005")':'t("ERROR.600004")',h.Z.getState().show({type:"error",message:t})}else{var t;throw Error(`[${e.status} ${null===(t=e.response)||void 0===t?void 0:t.statusText}] ${e.url}`)}}),function(e){return o.apply(this,arguments)}))},30762:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(75175),o=n(51626),i=n(89680),s=n(80497),a=n(69045),u=n(95740),l={removeItem(e){r.Z.remove(e)},setItem(e,t){r.Z.set(e,t,{secure:!0,sameSite:"strict",expires:3})},getItem:e=>{var t;return null!==(t=r.Z.get(e))&&void 0!==t?t:null}},c=n(29366),d=(0,o.Ue)()((0,i.tJ)((0,s.n)(e=>({isHydrated:!1,userId:-1,userRole:u.i4.guest,token:void 0,setAuth:t=>{e({userId:t.userId,userRole:t.userRole,token:t.token})},setToken:t=>{e(e=>{e.token=t})},clearAuth:()=>{e({userId:-1,userRole:u.i4.guest,token:void 0})},setHydrated:()=>{e(e=>{e.isHydrated=!0})}})),{name:a.tr,version:4,storage:(0,i.FL)(()=>l),partialize:e=>({token:e.token,userId:e.userId,userRole:e.userRole}),onRehydrateStorage:e=>{if(c.Z){let t=r.Z.get(a.tr);if(t){let n=JSON.parse(t).state;e.token=n.token,e.userId=n.userId,e.userRole=n.userRole}}return(e,t)=>{null==e||e.setHydrated()}}}))},92471:function(e,t,n){"use strict";var r=n(33454),o=n(29366),i=n(51626),s=n(89680);let a={apiEndpoint:"",imageEndpoint:""},u=(0,i.Ue)((0,s.XR)((0,s.tJ)(e=>(0,r._)({},a),{name:"ENDPOINT",storage:(0,s.FL)(()=>localStorage),onRehydrateStorage:e=>{if(o.Z){let t=localStorage.getItem("ENDPOINT");if(t){let n=JSON.parse(t).state;e.apiEndpoint=n.apiEndpoint,e.imageEndpoint=n.imageEndpoint}}}})));t.Z=u},68503:function(e,t,n){"use strict";n.d(t,{Rf:function(){return u},ed:function(){return a},xH:function(){return s}});var r=n(51626),o=n(89680);let i=(0,r.Ue)((0,o.XR)(e=>({isFullscreen:!1,signInModalOpened:!1,firstTimeEnteringLiveRoom:!0,isIpForbidden:!1,pauseStreaming:!0,toggleSignInModal:function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({signInModalOpened:t}),e({pauseStreaming:n})},toggleFullscreen:t=>e({isFullscreen:t}),isWebRTC:void 0,setIsWebRTC:t=>e({isWebRTC:t}),setFirstTimeEnteringLiveRoom:t=>e({firstTimeEnteringLiveRoom:t}),shouldSignOut:!1,setShouldSignOut:t=>e({shouldSignOut:t})}))),s=()=>i(e=>e.isIpForbidden),a=()=>i.setState({isIpForbidden:!0}),u=()=>i.setState({isIpForbidden:!1});t.ZP=i},15438:function(e,t,n){"use strict";var r=n(33454),o=n(92674),i=n(51626),s=n(80497);let a=(0,i.Ue)()((0,s.n)(e=>({toasts:[],show(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(e=>{let i=Date.now().toString();n?e.toasts.unshift((0,o._)((0,r._)({},t),{id:i})):e.toasts.push((0,o._)((0,r._)({},t),{id:i}))})},dismiss(t){e(e=>{let n=e.toasts.findIndex(e=>e.id===t);e.toasts.splice(n,1)})},dismissAll(){e({toasts:[]})}})));t.Z=a},77254:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(58674);let o=(0,n(57916).q7)({extend:{classGroups:{"font-size":["text-ss"],"text-shadow":["text-shadow-bullet"]}}});function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o((0,r.W)(t))}},29366:function(e,t){"use strict";t.Z=!0}}]);